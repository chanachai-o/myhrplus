<div class="tree-grid-demo-container">
  <app-glass-card padding="p-6" customClass="mb-6">
    <h2 class="text-2xl font-bold mb-4 thai-text">Tree Grid Component Demo</h2>
    <p class="text-slate-600 dark:text-slate-400 mb-6 thai-text">
      Component สำหรับแสดงข้อมูลแบบ hierarchical tree structure จาก Syncfusion พร้อม Glass Morphism styling และ features ครบถ้วน
    </p>

    <!-- Toolbar -->
    <div class="mb-4 flex flex-wrap gap-2">
      <button
        type="button"
        class="px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors"
        (click)="expandAll()">
        Expand All
      </button>
      <button
        type="button"
        class="px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors"
        (click)="collapseAll()">
        Collapse All
      </button>
      <button
        type="button"
        class="px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors"
        (click)="getSelectedRows()">
        Get Selected Rows
      </button>
      <div class="flex gap-2 ml-auto">
        <button
          type="button"
          class="px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors"
          (click)="exportToExcel()">
          Export Excel
        </button>
        <button
          type="button"
          class="px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors"
          (click)="exportToPdf()">
          Export PDF
        </button>
        <button
          type="button"
          class="px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors"
          (click)="exportToCsv()">
          Export CSV
        </button>
      </div>
    </div>

    <!-- Search -->
    <div class="mb-4">
      <input
        type="text"
        #searchInput
        placeholder="Search..."
        class="w-full px-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-primary-500"
        (keyup.enter)="search(searchInput.value)"
        (blur)="search(searchInput.value)">
      <button
        type="button"
        class="mt-2 px-4 py-2 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors"
        (click)="clearSearch()">
        Clear Search
      </button>
    </div>

    <!-- Tree Grid -->
    <div class="mb-8">
      <app-tree-grid
        #treegrid
        [dataSource]="sampleData"
        [columns]="columns"
        [childMapping]="'subtasks'"
        [allowPaging]="true"
        [allowSorting]="true"
        [allowFiltering]="true"
        [allowSelection]="true"
        [allowResizing]="true"
        [allowReordering]="true"
        [allowExcelExport]="true"
        [allowPdfExport]="true"
        [showColumnChooser]="true"
        [height]="'500px'"
        [width]="'100%'"
        [pageSettings]="{ pageSize: 10, pageSizes: [10, 20, 50, 100] }"
        [selectionSettings]="{ mode: 'Row', type: 'Multiple' }"
        [toolbar]="['Search', 'ExcelExport', 'PdfExport', 'CsvExport', 'ColumnChooser']"
        (created)="onCreated($event)"
        (dataBound)="onDataBound($event)"
        (rowSelected)="onRowSelected($event)"
        (recordClick)="onRecordClick($event)">
      </app-tree-grid>
    </div>

    <!-- Usage Example -->
    <div class="mt-8">
      <h3 class="text-xl font-semibold mb-4 thai-text">ตัวอย่างการใช้งาน</h3>
      <pre class="bg-slate-100 dark:bg-slate-800 p-4 rounded-lg overflow-x-auto"><code class="text-sm">// TypeScript
import {{ '{' }} TreeGridComponent, TreeGridColumn {{ '}' }} from '../../shared/components/tree-grid/tree-grid.component';

&#64;ViewChild('treegrid') treegrid!: TreeGridComponent;

columns: TreeGridColumn[] = [
  {{ '{' }} field: 'taskID', headerText: 'Task ID', width: 90, isPrimaryKey: true {{ '}' }},
  {{ '{' }} field: 'taskName', headerText: 'Task Name', width: 200 {{ '}' }},
  {{ '{' }} field: 'startDate', headerText: 'Start Date', width: 120, format: 'yMd', type: 'date' {{ '}' }}
];

dataSource: any[] = [
  {{ '{' }}
    taskID: 1,
    taskName: 'Parent Task',
    subtasks: [
      {{ '{' }} taskID: 2, taskName: 'Child Task 1' {{ '}' }},
      {{ '{' }} taskID: 3, taskName: 'Child Task 2' {{ '}' }}
    ]
  {{ '}' }}
];

// Expand/Collapse
expandAll(): void {{ '{' }}
  this.treegrid.expandAll();
{{ '}' }}

// Export
exportToExcel(): void {{ '{' }}
  this.treegrid.exportToExcel('treegrid');
{{ '}' }}

// HTML
&lt;app-tree-grid
  #treegrid
  [dataSource]="dataSource"
  [columns]="columns"
  [childMapping]="'subtasks'"
  [allowPaging]="true"
  [allowSorting]="true"
  [allowFiltering]="true"
  [allowSelection]="true"
  [height]="'500px'"
  (rowSelected)="onRowSelected($event)"&gt;
&lt;/app-tree-grid&gt;</code></pre>
    </div>
  </app-glass-card>
</div>

