<div class="home-container">
  <!-- Welcome Section -->
  <div class="welcome-section">
    <div class="welcome-content">
      <h1 class="welcome-title thai-text">
        {{ getGreeting() }}, {{ currentUser?.fullname || currentUser?.name || 'ผู้ใช้งาน' }}!
      </h1>
      <p class="welcome-subtitle thai-text">
        ยินดีต้อนรับสู่ระบบ HR Management
      </p>
      <div class="user-info" *ngIf="currentUser">
        <div class="info-item">
          <mat-icon>badge</mat-icon>
          <span class="thai-text">รหัสพนักงาน: {{ currentUser.employeeid || currentUser.uid }}</span>
        </div>
        <div class="info-item" *ngIf="currentUser['emp_position']">
          <mat-icon>work</mat-icon>
          <span class="thai-text">ตำแหน่ง: {{ currentUser['emp_position'] }}</span>
        </div>
        <div class="info-item" *ngIf="currentUser['workarea']">
          <mat-icon>business</mat-icon>
          <span class="thai-text">แผนก: {{ currentUser['workarea'] }}</span>
        </div>
      </div>
    </div>
    <div class="welcome-decoration">
      <div class="decoration-circle circle-1"></div>
      <div class="decoration-circle circle-2"></div>
      <div class="decoration-circle circle-3"></div>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p class="thai-text">กำลังโหลดโมดูล...</p>
  </div>

  <!-- Modules Grid -->
  <div *ngIf="!loading && modules.length > 0" class="modules-section">
    <h2 class="section-title thai-text">เลือกโมดูลที่ต้องการใช้งาน</h2>
    
    <!-- Employee Modules -->
    <div *ngIf="getModulesByCategory('employee').length > 0" class="module-category">
      <h3 class="category-title thai-text">
        <mat-icon>person</mat-icon>
        สำหรับพนักงาน
      </h3>
      <div class="modules-grid">
        <div
          *ngFor="let module of getModulesByCategory('employee')"
          class="module-card"
          [style.background]="module.gradient"
          (click)="navigateToModule(module.route)"
          [@fadeInUp]>
          <div class="module-card-content">
            <div class="module-icon">
              <mat-icon>{{ module.icon }}</mat-icon>
            </div>
            <div class="module-info">
              <h3 class="module-name thai-text">{{ module.thaiName }}</h3>
              <p class="module-english">{{ module.englishName }}</p>
              <p class="module-description thai-text">{{ module.thaiDescription }}</p>
            </div>
            <div class="module-arrow">
              <mat-icon>arrow_forward</mat-icon>
            </div>
          </div>
          <div class="module-card-overlay"></div>
        </div>
      </div>
    </div>

    <!-- Management Modules -->
    <div *ngIf="getModulesByCategory('management').length > 0" class="module-category">
      <h3 class="category-title thai-text">
        <mat-icon>supervisor_account</mat-icon>
        สำหรับผู้จัดการ
      </h3>
      <div class="modules-grid">
        <div
          *ngFor="let module of getModulesByCategory('management')"
          class="module-card"
          [style.background]="module.gradient"
          (click)="navigateToModule(module.route)"
          [@fadeInUp]>
          <div class="module-card-content">
            <div class="module-icon">
              <mat-icon>{{ module.icon }}</mat-icon>
            </div>
            <div class="module-info">
              <h3 class="module-name thai-text">{{ module.thaiName }}</h3>
              <p class="module-english">{{ module.englishName }}</p>
              <p class="module-description thai-text">{{ module.thaiDescription }}</p>
            </div>
            <div class="module-arrow">
              <mat-icon>arrow_forward</mat-icon>
            </div>
          </div>
          <div class="module-card-overlay"></div>
        </div>
      </div>
    </div>

    <!-- Admin Modules -->
    <div *ngIf="getModulesByCategory('admin').length > 0" class="module-category">
      <h3 class="category-title thai-text">
        <mat-icon>admin_panel_settings</mat-icon>
        สำหรับผู้ดูแลระบบ
      </h3>
      <div class="modules-grid">
        <div
          *ngFor="let module of getModulesByCategory('admin')"
          class="module-card"
          [style.background]="module.gradient"
          (click)="navigateToModule(module.route)"
          [@fadeInUp]>
          <div class="module-card-content">
            <div class="module-icon">
              <mat-icon>{{ module.icon }}</mat-icon>
            </div>
            <div class="module-info">
              <h3 class="module-name thai-text">{{ module.thaiName }}</h3>
              <p class="module-english">{{ module.englishName }}</p>
              <p class="module-description thai-text">{{ module.thaiDescription }}</p>
            </div>
            <div class="module-arrow">
              <mat-icon>arrow_forward</mat-icon>
            </div>
          </div>
          <div class="module-card-overlay"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && modules.length === 0" class="empty-state">
    <mat-icon class="empty-icon">folder_open</mat-icon>
    <h3 class="thai-text">ไม่มีโมดูลที่สามารถเข้าถึงได้</h3>
    <p class="thai-text">กรุณาติดต่อผู้ดูแลระบบเพื่อขอสิทธิ์การเข้าถึง</p>
  </div>
</div>
