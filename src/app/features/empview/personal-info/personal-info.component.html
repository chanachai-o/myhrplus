<app-page-layout
  title="Personal Information"
  description="à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¹ˆà¸§à¸™à¸•à¸±à¸§à¸‚à¸­à¸‡à¸žà¸™à¸±à¸à¸‡à¸²à¸™"
  icon="ðŸ‘¤">
  
  <app-glass-card padding="p-6" [animate]="'fade-in'">
    <div class="mb-6 flex items-center justify-between">
      <h2 class="text-2xl font-bold text-slate-800 dark:text-slate-100 thai-text">Personal Information</h2>
      <app-glass-button 
        variant="secondary"
        size="sm"
        (clicked)="editProfile()"
        [title]="'Edit Profile'">
        <app-icon name="edit" size="sm"></app-icon>
      </app-glass-button>
    </div>
    
    <app-loading *ngIf="loading" message="à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”à¸‚à¹‰à¸­à¸¡à¸¹à¸¥..."></app-loading>

    <div *ngIf="!loading">
      <div class="profile-content" *ngIf="profileData">
        <div class="profile-header mb-6">
          <div class="profile-picture" *ngIf="profileData.picture">
            <img [src]="getPictureUrl()" [alt]="getFullname()" class="w-24 h-24 rounded-full object-cover">
          </div>
          <div class="profile-picture-placeholder w-24 h-24 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center" *ngIf="!profileData.picture">
            <app-icon name="person" size="xl" color="text-gray-400 dark:text-gray-500"></app-icon>
          </div>
          <div class="profile-name ml-4">
            <h2 class="text-xl font-semibold text-slate-800 dark:text-slate-100 thai-text">{{ getFullname() }}</h2>
            <p class="employee-id text-sm text-slate-600 dark:text-slate-400 mt-1">ID: {{ profileData.employeeId }}</p>
          </div>
        </div>

        <!-- Tabs -->
        <div class="tabs-container">
          <div class="tabs-header flex border-b border-gray-200 dark:border-gray-700 mb-4">
            <button
              (click)="activeTab = 0"
              [class.active]="activeTab === 0"
              class="px-6 py-3 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 border-b-2 transition-colors"
              [class.border-indigo-600]="activeTab === 0"
              [class.text-indigo-600]="activeTab === 0"
              [class.dark:text-indigo-400]="activeTab === 0">
              Basic Information
            </button>
            <button
              (click)="activeTab = 1"
              [class.active]="activeTab === 1"
              class="px-6 py-3 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 border-b-2 transition-colors"
              [class.border-indigo-600]="activeTab === 1"
              [class.text-indigo-600]="activeTab === 1"
              [class.dark:text-indigo-400]="activeTab === 1">
              Work History
            </button>
            <button
              (click)="activeTab = 2"
              [class.active]="activeTab === 2"
              class="px-6 py-3 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 border-b-2 transition-colors"
              [class.border-indigo-600]="activeTab === 2"
              [class.text-indigo-600]="activeTab === 2"
              [class.dark:text-indigo-400]="activeTab === 2">
              Documents
            </button>
          </div>

          <div class="tabs-content">
            <!-- Basic Information Tab -->
            <div *ngIf="activeTab === 0" class="tab-content">
              <div class="info-section">
                <div class="info-row flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700">
                  <span class="info-label text-sm text-slate-600 dark:text-slate-400">Employee ID:</span>
                  <span class="info-value text-sm font-medium text-slate-800 dark:text-slate-100">{{ profileData.employeeId }}</span>
                </div>
                <div class="info-row flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700" *ngIf="profileData.email">
                  <span class="info-label text-sm text-slate-600 dark:text-slate-400">Email:</span>
                  <span class="info-value text-sm font-medium text-slate-800 dark:text-slate-100">{{ profileData.email }}</span>
                </div>
                <div class="info-row flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700" *ngIf="profileData['phone'] || profileData.mobile || profileData.telNo">
                  <span class="info-label text-sm text-slate-600 dark:text-slate-400">Phone:</span>
                  <span class="info-value text-sm font-medium text-slate-800 dark:text-slate-100">{{ profileData['phone'] || profileData.mobile || profileData.telNo }}</span>
                </div>
                <div class="info-row flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700" *ngIf="profileData.position">
                  <span class="info-label text-sm text-slate-600 dark:text-slate-400">Position:</span>
                  <span class="info-value text-sm font-medium text-slate-800 dark:text-slate-100">{{ profileData.position?.tdesc || profileData.position?.edesc || '-' }}</span>
                </div>
                <div class="info-row flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700" *ngIf="profileData['department']">
                  <span class="info-label text-sm text-slate-600 dark:text-slate-400">Department:</span>
                  <span class="info-value text-sm font-medium text-slate-800 dark:text-slate-100">{{ profileData['department'] }}</span>
                </div>
                <div class="info-row flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700" *ngIf="profileData['division']">
                  <span class="info-label text-sm text-slate-600 dark:text-slate-400">Division:</span>
                  <span class="info-value text-sm font-medium text-slate-800 dark:text-slate-100">{{ profileData['division'] }}</span>
                </div>
                <div class="info-row flex items-center justify-between py-3 border-b border-gray-200 dark:border-gray-700" *ngIf="profileData['joinDate'] || profileData.firstHiredate">
                  <span class="info-label text-sm text-slate-600 dark:text-slate-400">Join Date:</span>
                  <span class="info-value text-sm font-medium text-slate-800 dark:text-slate-100">{{ (profileData['joinDate'] || profileData.firstHiredate) | date:'dd-MM-yyyy' }}</span>
                </div>
              </div>
            </div>

            <!-- Work History Tab -->
            <div *ngIf="activeTab === 1" class="tab-content">
              <p class="text-slate-600 dark:text-slate-400 thai-text">Work history information will be displayed here.</p>
            </div>

            <!-- Documents Tab -->
            <div *ngIf="activeTab === 2" class="tab-content">
              <p class="text-slate-600 dark:text-slate-400 thai-text mb-4">Employee documents will be displayed here.</p>
              <app-glass-button 
                variant="primary"
                size="md"
                (clicked)="navigateToDocuments()">
                <app-icon name="folder" size="sm" color="text-white"></app-icon>
                <span>View All Documents</span>
              </app-glass-button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </app-glass-card>
</app-page-layout>
