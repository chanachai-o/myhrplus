<div class="two-layer-sidebar h-full flex" [class.dark]="isDarkMode">
  <!-- Left Icon Bar - Module Icons -->
  <div class="icon-bar flex flex-col items-center py-4 border-r transition-colors duration-300">
    <!-- Logo -->
    <div class="mb-6">
      <div class="logo-container w-12 h-12 rounded-xl flex items-center justify-center shadow-lg transition-all duration-300 hover:scale-110">
        <span class="text-white text-xl font-bold">H</span>
      </div>
    </div>

    <!-- Module Icons -->
    <div class="flex flex-col gap-3 flex-1 w-full px-2">
      <button
        *ngFor="let module of mainModules"
        [class.active]="selectedModule === module.id"
        [title]="module.name"
        (click)="selectModule(module.id)"
        class="module-icon-btn w-full h-12 flex items-center justify-center rounded-xl transition-all duration-300 relative group">
        <span [class]="module.iconCss" class="text-xl transition-colors duration-300"></span>
        <!-- Active Indicator -->
        <span *ngIf="selectedModule === module.id" class="active-indicator"></span>
      </button>
    </div>
  </div>

  <!-- Right Menu Panel - Module Menu -->
  <div class="menu-panel flex-1 overflow-y-auto transition-colors duration-300">
    <div class="p-5">
      <!-- Module Header -->
      <div class="mb-6" *ngIf="selectedModuleData">
        <h2 class="module-title text-xl font-bold mb-2 thai-text transition-colors duration-300">
          {{ selectedModuleData.name }}
        </h2>
        <div class="module-divider h-px transition-colors duration-300"></div>
      </div>

      <!-- Module Menu Items -->
      <ejs-listview
        *ngIf="selectedModuleData && selectedModuleData.menuItems.length > 0"
        #listview
        [dataSource]="selectedModuleData.menuItems"
        [fields]="listViewFields"
        [showIcon]="true"
        [showCheckBox]="false"
        (select)="onMenuItemSelect($event)"
        class="syncfusion-module-menu">
      </ejs-listview>

      <!-- Empty State - No Menu Items -->
      <div *ngIf="selectedModuleData && selectedModuleData.menuItems.length === 0" class="empty-menu-state flex flex-col items-center justify-center py-12">
        <span class="e-icons e-folder text-5xl mb-4 opacity-50"></span>
        <p class="empty-text thai-text text-center">ไม่มีเมนูในโมดูลนี้</p>
      </div>

      <!-- Empty State - No Module Selected -->
      <div *ngIf="!selectedModuleData" class="empty-state flex flex-col items-center justify-center h-full py-12">
        <span class="e-icons e-folder text-5xl mb-4 opacity-50"></span>
        <p class="empty-text thai-text text-center">เลือกโมดูลเพื่อดูเมนู</p>
      </div>
    </div>
  </div>
</div>
