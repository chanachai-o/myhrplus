<!-- ============================================================== -->
<!-- toggle and nav items -->
<!-- ============================================================== -->
<ul class="navbar-nav float-start me-auto mt-1">
  <li class="nav-item d-none d-lg-block">
    <a (click)="toggleSidebar.emit()" class="nav-link sidebartoggler waves-effect waves-light"
      href="javascript:void(0)">
      <i class="mdi mdi-menu font-24"></i>
    </a>
  </li>
  <!-- ============================================================== -->
  <!-- ============================================================== -->
  <!-- Search -->
  <!-- ============================================================== -->
  <li class="nav-item search-box">
    <!-- <a (click)="showSearch = !showSearch" class="nav-link waves-effect waves-dark" href="javascript:void(0)">
            <i class="ti-search"></i>
        </a> -->
    <form class="app-search position-absolute" [ngClass]="{ 'show-search': showSearch }">
      <input type="text" class="form-control" placeholder="Search &amp; enter" />
      <a class="srh-btn" (click)="showSearch = !showSearch">
        <i class="ti-close"></i>
      </a>
    </form>
  </li>
</ul>
<!-- ============================================================== -->
<!-- Right side toggle and nav items -->
<!-- ============================================================== -->
<ul class="navbar-nav float-end mt-1">
  <!-- ============================================================== -->
  <!-- create new -->
  <!-- ============================================================== -->
  <!-- <li class="nav-item dropdown" ngbDropdown placement="bottom-right" *ngIf="isMobileDevice">
    <a ngbDropdownToggle class="nav-link dropdown-toggle waves-effect waves-dark"
      href="zeemeplus://zeeserver.myhr.co.th/openapp"
       aria-haspopup="true" aria-expanded="false">
      <img src="assets/images/logo/zeemePlus.png" alt="">
    </a>
  </li> -->
  <!-- <li class="nav-item dropdown" ngbDropdown placement="bottom-right" *ngIf="isMobileDevice">
    <a ngbDropdownToggle class="nav-link dropdown-toggle waves-effect waves-dark"
      href="zeeme://zeeserver.myhr.co.th/openapp"
       aria-haspopup="true" aria-expanded="false">
      <img src="assets/images/logo/zeeme.png" alt="">
    </a>
  </li> -->
  <li class="nav-item dropdown" ngbDropdown placement="bottom-right">
    <a ngbDropdownToggle class="nav-link dropdown-toggle" href="javascript:void(0)" id="navbarDropdown" role="button"
       aria-haspopup="true" aria-expanded="false">
      <i class="flag-icon flag-icon-{{ selectedLanguageIcon }}"></i>
    </a>
    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown" ngbDropdownMenu>
      <span class="dropdown-item" href="#" *ngFor="let lang of languages" (click)="changeLanguage(lang)">
        <i class="flag-icon flag-icon-{{ lang.icon }}"></i>
        <span>{{ lang.language }}
          <span *ngIf="lang.type">({{ lang.type }})</span>
        </span>
      </span>

      <!-- <a class="dropdown-item" href="#">
                <i class="flag-icon flag-icon-us"></i> English</a>
            <a class="dropdown-item" href="#">
                <i class="flag-icon flag-icon-fr"></i> French</a>
            <a class="dropdown-item" href="#">
                <i class="flag-icon flag-icon-es"></i> Spanish</a>
            <a class="dropdown-item" href="#">
                <i class="flag-icon flag-icon-de"></i> German</a> -->
    </div>
  </li>

  <!-- ============================================================== -->
  <!-- Comment -->
  <!-- ============================================================== -->
  <li class="nav-item dropdown" ngbDropdown placement="bottom-right">
    <a ngbDropdownToggle class="nav-link dropdown-toggle waves-effect waves-dark" routerLink="/workflow/myhr-in-box"
       aria-haspopup="true" aria-expanded="false">
      <div class="notification">
        <i class="fas fa-envelope font-18"></i>
        <!-- <i class="material-symbols-outlined">mail</i> -->
        <span class="badge rounded-pill badge-danger"
          *ngIf="countNewNote > 0">{{ countNewNote }}</span>
        <!-- แจ้งเตือนมากกว่า 10 ให้กำหนดค่าเป็น 9+ -->
      </div>
    </a>
    <!-- <div class="dropdown-menu dropdown-menu-end mailbox" ngbDropdownMenu>
      <span class="with-arrow">
        <span class="bg-primary"></span>
      </span>
      <ul class="list-style-none">
        <li>
          <div class="drop-title bg-primary text-white">
            <h4 class="m-b-0 mt-1">{{countNewNote}} New</h4>
            <span class="font-light">Notifications</span>
          </div>
        </li>
      </ul>
    </div> -->
  </li>
  <!-- ============================================================== -->
  <!-- End Comment -->
  <!-- ============================================================== -->

  <li class="nav-item dropdown" ngbDropdown placement="bottom-right">
    <a ngbDropdownToggle class="nav-link dropdown-toggle waves-effect waves-dark"
      aria-haspopup="true" aria-expanded="false" (click)="showSettingbar.emit(2)">
      <div class="notification">
        <i class="fas fa-comment font-18"></i>
        <!-- <i class="material-symbols-outlined">chat</i> -->
        <span class="badge rounded-pill badge-danger"
          *ngIf="countNewMessage > 0">{{ countNewMessage }}</span>
        <!-- <span class="badge rounded-pill badge-danger" style="top: 9px !important;right: -14px!important;" *ngIf="countNewNote>0">{{countNewNote}}</span> -->
        <!-- แจ้งเตือนมากกว่า 10 ให้กำหนดค่าเป็น 9+ -->
      </div>
    </a>
  </li>

  <li class="nav-item dropdown align-items-center" ngbDropdown placement="bottom-right">
    <a ngbDropdownToggle class="nav-link dropdown-toggle waves-effect waves-dark"  routerLink="/shared-ui/chat-ai"
      aria-haspopup="true" aria-expanded="false" >
      <!-- <img src="assets/images/robot-solid.svg"/> -->
      <i class="material-symbols-outlined">robot_2</i>
    </a>
  </li>

  <!-- ============================================================== -->
  <!-- User profile and search -->
  <!-- ============================================================== -->
  <li class="nav-item" ngbDropdown placement="bottom-right" *ngIf="empProfile">
    <a ngbDropdownToggle class="nav-link text-muted waves-effect waves-dark pro-pic" href="javascript:void(0)"
       aria-haspopup="true" aria-expanded="false">
      <img appShowLoading *ngIf="empProfile?.picture ;else blankImage" src="{{empProfile.getPictureUrl()}}" alt="users"
        class="rounded-circle" width="31" height="31">
      <ng-template #blankImage>
        <img src="assets/images/users/defaultperson.jpg" alt="" class="rounded-circle" width="31" height="31">
      </ng-template>
    </a>
    <div class="dropdown-menu-end user-dd" ngbDropdownMenu>
      <span class="with-arrow">
        <span class="bg-primary"></span>
      </span>
      <div class="d-flex no-block align-items-center p-3 bg-primary text-white mb-2">
        <div class="">
          <img appShowLoading *ngIf="empProfile?.picture ;else blankImage" src="{{empProfile.getPictureUrl()}}"
            alt="users" class="rounded-circle" width="60" height="60">
          <ng-template #blankImage>
            <img src="assets/images/users/defaultperson.jpg" alt="" class="rounded-circle" width="60" height="60">
          </ng-template>
        </div>
        <div class="m-l-10">
          <h4 class="m-b-0">{{ empProfile.getFullname() }}</h4>
          <p class="m-b-0">{{ empProfile.email }}</p>
        </div>
      </div>
      <a class="dropdown-item" routerLink="/employee/employee-profile">
        <i class="ti-user me-1 m-l-5"></i>{{ "menu.employee-profile" | translate }}</a>
      <a class="dropdown-item"
        href="{{urlHr}}/TOKENVERFY.jsp?t={{ userToken }}&lang={{translate.currentLang == 'th' ? 'tha' : 'eng'}}"
        *ngIf="checkRole">
        <i class="ti-settings me-1 m-l-5"></i>{{ "menu.hr-management" | translate }}</a>
      <a class="dropdown-item" (click)="openModalSetting()">
        <i class="ti-pencil-alt me-1 m-l-5"></i>{{ "systemcode.profile.setting" | translate }}</a>
      <a class="dropdown-item" routerLink="/admin/workflow-admin-menu" *ngIf="wfMenu">
        <i class="ti-harddrives me-1 m-l-5"></i>{{ "menu.myhr-manage-doc" | translate }}</a>
      <!-- <a class="dropdown-item" href="javascript:void(0)">
                <i class="ti-wallet me-1 m-l-5"></i> My Balance</a>
            <a class="dropdown-item" href="javascript:void(0)">
                <i class="ti-email me-1 m-l-5"></i> Inbox</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="javascript:void(0)">
                <i class="ti-settings me-1 m-l-5"></i> Account Setting</a> -->
      <div class="dropdown-divider"></div>
      <a class="dropdown-item" href="javascript:void(0)" (click)="logout()">
        <i class="fa fa-power-off me-1 m-l-5"></i>{{ "systemcode.logout" | translate }}</a>
      <div class="dropdown-divider"></div>
      <!-- <div class="p-l-30 p-10">
                <a href="javascript:void(0)" class="btn btn-sm btn-success btn-rounded">View Profile</a>
            </div> -->
    </div>
  </li>
  <!-- ============================================================== -->
  <!-- User profile and search -->
  <!-- ============================================================== -->
</ul>

<ng-template #contentPDPA let-modal>
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title">PDPA</h5>
    </div>
    <div class="modal-body p-0" [perfectScrollbar]="config">

      <div class="row mt-3 ml-2">
        <div class="col col-lg-2">
          <p class="card-subtitle">{{"version" | translate}} {{dataPdpa?.version}}</p>
        </div>
        <div class="col col-lg-2">
          <p class="card-subtitle">{{"date" | translate}} {{dataPdpa?.startDate}}</p>
        </div>
      </div>
      <div class="card-body"
        [innerHtml]="translate.currentLang == 'th'? (dataPdpa?.requestConsent):(dataPdpa?.requestConsentEng)">
      </div>

      <div class="card-body ">
        <div class="d-flex no-block align-items-center justify-content-center">
          <div class="action-form">
            <div class="mb-0 text-center">
              <button type="submit" class="btn btn-success mr-2" (click)="onSubmitPdpa();modal.dismiss('Cross click')">
                {{"consent" | translate}}</button>
              <button type="button" class="btn btn-danger ml-2" (click)="logout();modal.dismiss('Cross click')">
                {{"exit"| translate}}</button>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #alertModal let-modal>
  <div class="modal-header">
    <h5 class="modal-title" id="editLabel">Alert Message</h5>
    <button type="button" class="close" (click)="closeBtnClick()" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    {{ msg }}
  </div>
</ng-template>
