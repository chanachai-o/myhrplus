<div class="card">
    <div class="card-header bg-myhr">
        <h4>{{"Daily Time Attendance" | translate}}</h4>
    </div>
    <div class="card-body">
        <div class="filter-grid">
            <div>
                <label class="form-label">{{"Employee ID"| translate}}</label>
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="{{'Employee ID'| translate}}" [ngModel]="employee.employeeId" (ngModelChange)="modelEmployeeChange($event)">
                    <div class="input-group-append">
                        <button type="button" class="btn btn-info" (click)="openEmployeeModal()">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div>
                <label class="form-label">{{'Employee Name'| translate}}</label>
                <input type="text" class="form-control" [value]="employee.getName()" disabled>
            </div>
            <div>
                <label class="form-label">{{"Period Start" | translate}}</label>
                <div class="input-group">
                    <input class="form-control" ngbDatepicker #DpStart="ngbDatepicker" placeholder="{{'dd.mm.yyyy' | translate}}" [(ngModel)]="dateStart" #c1="ngModel" (change)="dateStart = datepickerService.validateFormatDate(c1)">
                    <button type="button" class="btn btn-outline-info no-shadow" (click)="DpStart.toggle()">
                        <i class="far fa-calendar-alt"></i>
                    </button>
                </div>
            </div>
            <div>
                <label class="form-label">{{"Period End" | translate}}</label>
                <div class="input-group">
                    <input class="form-control" ngbDatepicker #DpEnd="ngbDatepicker" placeholder="{{'dd.mm.yyyy' | translate}}" [(ngModel)]="dateEnd" [minDate]="dateStart" #c2="ngModel" (change)="dateEnd = datepickerService.validateFormatDate(c2)">
                    <button type="button" class="btn btn-outline-info no-shadow" (click)="DpEnd.toggle()">
                        <i class="far fa-calendar-alt"></i>
                    </button>
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-center mb-3">
            <div class="radio-group">
                <div class="form-check">
                    <input type="radio" name="EmployeeRadio" id="Subordinate" class="form-check-input" [value]="1" [(ngModel)]="employeeRadio">
                    <label class="form-check-label" for="Subordinate">{{"Subordinate" | translate}}</label>
                </div>
                <div class="form-check">
                    <input type="radio" name="EmployeeRadio" id="Borrowed" class="form-check-input" [value]="2" [(ngModel)]="employeeRadio">
                    <label class="form-check-label" for="Borrowed">{{"Borrowed" | translate}}</label>
                </div>
            </div>
        </div>

        <div class="text-center mb-3">
            <button type="button" class="btn btn-primary waves-effect waves-light" (click)="search()">
                <i class="mdi mdi-magnify me-1"></i> {{"systemcode.search" | translate}}
            </button>
        </div>

        <div *ngIf="searchShow">
            <div class="button-group">
                <button type="button" class="btn btn-outline-primary" (click)="openSetShiftModal()">{{"K:Set Shift" | translate}}</button>
                <button type="button" class="btn btn-outline-primary" (click)="openSetWorkOffModal()">{{"K:Set Work/off" | translate}}</button>
                <button type="button" class="btn btn-outline-primary" (click)="openPostLeaveModal()">{{"K:Post Leave" | translate}}</button>
                <button type="button" class="btn btn-success" (click)="process()" *ngIf="buttonGreenShow&&!buttonGreenLoading">{{"Process" | translate}}</button>
            </div>

            <div class="text-center mb-3" *ngIf="buttonGreenLoading">
                <div class="spinner-border text-info" role="status"></div>
            </div>

            <div class="text-center mb-3" *ngIf="buttonGreenShow&&!buttonGreenLoading">
                <button type="button" class="btn btn-success" (click)="exportToExcel()">
                    <i class="mdi mdi-file-excel me-1"></i> {{"Export"| translate}}
                </button>
            </div>

            <!-- Desktop Table View -->
            <div class="table-responsive d-none d-lg-block">
                <table class="table table-hover table-striped-myhr table-sm mb-0 no-wrap v-middle table-bordered">
                    <!-- Existing table thead -->
                    <thead class="bg-info text-white">
                        <!-- ... header rows ... -->
                    </thead>
                    <tbody>
                        <!-- ... table body ... -->
                    </tbody>
                </table>
            </div>

            <!-- Mobile Card View -->
            <div class="d-lg-none">
                <div *ngIf="!tc1EmployeeListLoading && tc1EmployeeList.length === 0" class="text-center py-3 text-muted">{{"No Data Found" | translate}}</div>
                <div *ngIf="tc1EmployeeListLoading" class="text-center py-3">
                    <div class="spinner-border text-info" role="status"></div>
                </div>

                <div *ngFor="let item of tc1EmployeeList | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize; let i=index" class="attendance-card-mobile">
                    <div class="card-header">
                        <span>{{item.data.employee.getName()}}</span>
                        <span class="badge bg-light text-dark">#{{((page-1) * pageSize)+(i+1)}}</span>
                    </div>
                    <div class="card-body">
                        <div class="info-grid">
                            <div class="info-item"><span>{{"Employee ID"| translate}}</span><strong>{{item.data.employee.employeeId}}</strong></div>
                            <div class="info-item"><span>{{"Forget date"| translate}}</span><strong>{{item.data.dateId | date:"dd-MM-yyyy"}}</strong></div>
                            <div class="info-item"><span>{{"status"| translate}}</span><strong>{{item.data.eventGrp.getName()}}</strong></div>
                            <div class="info-item"><span>{{"Shift.1"| translate}}</span><strong>{{item.data.time0Id.time0id}}</strong></div>
                        </div>
                        <div class="time-details mt-3">
                            <div class="info-grid">
                                <div class="info-item"><span>{{"Shift In"| translate}}</span><strong>{{convertFormatTime(item.data.ctmBg)}}</strong></div>
                                <div class="info-item"><span>{{"Shift Out"| translate}}</span><strong>{{convertFormatTime(item.data.ctmEn)}}</strong></div>
                                <div class="info-item"><span>{{"Punch In"| translate}}</span><strong>{{convertFormatTimeCheckCurrentDate(item.data.mtmBg, item.data.dateId, item.data.sourceIn)}}</strong></div>
                                <div class="info-item"><span>{{"Punch Out"| translate}}</span><strong>{{convertFormatTimeCheckCurrentDate(item.data.mtmEn, item.data.dateId, item.data.sourceOut)}}</strong></div>
                                <div class="info-item"><span>{{"Late"| translate}}</span><strong>{{convertFormatTime(item.data.lt)}}</strong></div>
                                <div class="info-item"><span>{{"Leave"| translate}}</span><strong>{{convertFormatTimeLeave(item.data.mlv, item.data.eventGrp.eventgrpid)}}</strong></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="d-flex justify-content-end p-2">
                <select class="form-select me-2" style="width: auto" [(ngModel)]="pageSize" (ngModelChange)="page=1">
                    <option *ngFor="let num of [10,50,100]" [ngValue]="num">{{"Items per page"| translate}}: {{num}}</option>
                </select>
                <ngb-pagination [collectionSize]="tc1EmployeeList.length" [(page)]="page" [pageSize]="pageSize" [maxSize]="3" [rotate]="true"></ngb-pagination>
            </div>
        </div>
    </div>
</div>