<!-- ใบขออนุมัติฝึกอบรมและสัมมนาภายนอก -->
<div class="row">
  <!-- ส่งถึง -->
  <div class="col-12">
        <app-workflow-sendto (employeeCCId)="employeeCCId=$event" [wfid]="wfid" cardName="systemcode.train.out"></app-workflow-sendto>
    </div>

  <!-- รายละเอียดข้อมูลพนักงาน -->
  <div class="col-12">
    <div class="card mb-0">
      <div class="card-header bg-myhr">
        <h6 class="card-title">{{"Employee Detail" | translate}}</h6>
      </div>
      <div class="card-body" *ngIf="emp">
        <div class="row">
          <div class="col-md-6 col-xs-12 b-r">
            <small class="text-muted">{{"Employee ID" | translate}}</small>
            <h6>{{emp.employeeId}}</h6>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <small class="text-muted">{{"Name-Surname" | translate}}</small>
            <h6>{{emp.getFullname()}}</h6>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <small class="text-muted">{{"Position" | translate}}</small>
            <h6>{{emp.position.getPositionDesc()?emp.position.getPositionDesc():'-'}}</h6>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <small class="text-muted">{{"dashboard.bu1" | translate}}</small>
            <h6>{{emp.bu1.getBu1Desc()?emp.bu1.getBu1Desc():'-'}}</h6>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <small class="text-muted">{{"dashboard.bu2" | translate}}</small>
            <h6>{{emp.bu2.getBu2Desc()?emp.bu2.getBu2Desc():'-'}}</h6>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <small class="text-muted">{{"dashboard.bu3" | translate}}</small>
            <h6>{{emp.bu3.getBu3Desc()?emp.bu3.getBu3Desc():'-'}}</h6>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <small class="text-muted">{{"dashboard.bu4" | translate}}</small>
            <h6>{{emp.bu4.getBu4Desc()?emp.bu4.getBu4Desc():'-'}}</h6>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <small class="text-muted">{{"dashboard.bu5" | translate}}</small>
            <h6>{{emp.bu5.getBu5Desc()?emp.bu5.getBu5Desc():'-'}}</h6>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <small class="text-muted">{{"tel" | translate}}</small>
            <h6>{{emp.telExt?emp.telExt:'-'}}</h6>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- รายละเอียดการอบรม -->
  <div class="col-12">
    <div class="card mb-0">
      <div class="card-header bg-myhr">
        <h6 class="card-title">{{"training detail" | translate}}</h6>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.course.desc" | translate}}</small>
              <input type="text" class="form-control col-lg-8 col-md-8 col-sm-8 " [(ngModel)]="__wf__headtraining">
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.institute" | translate}}</small>
              <input type="text" class="form-control col-lg-8 col-md-8 col-sm-8 " [(ngModel)]="__wf__companytraining">
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.location" | translate}}</small>
              <input type="text" class="form-control col-lg-8 col-md-8 col-sm-8 " [(ngModel)]="__wf__trainlocation">
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"Tel" | translate}}</small>
              <input type="text" class="form-control col-lg-8 col-md-8 col-sm-8 " [(ngModel)]="__wf__phone">
            </div>
          </div>
          <div class="col-md-12 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"workflow.result" | translate}}</small>
              <textarea class="form-control" rows="2" style="resize: none;"
                placeholder='{{"workflow.result" | translate}}' [(ngModel)]="__wf__objecttraining"></textarea>
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.course.start.date" | translate}}</small>
              <div class="input-group">
                <input class="form-control col-md-6 col-sm-6 col-lg-6" placeholder="{{'dd.mm.yyyy' | translate}}"
                  name="dp1" [(ngModel)]="__wf__classdatefrm" (ngModelChange)="dateChange('__wf__classdatefrm')"
                  ngbDatepicker #d1="ngbDatepicker">
                <div class="input-group-append">
                  <button class="btn btn-outline-info no-shadow" (click)="d1.toggle()" type="button">
                    <i class="far fa-calendar-alt"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.course.end.date" | translate}}</small>
              <div class="input-group">
                <input class="form-control col-md-6 col-sm-6 col-lg-6" placeholder="{{'dd.mm.yyyy' | translate}}"
                  name="dp2" [(ngModel)]="__wf__classdateto" (ngModelChange)="dateChange('__wf__classdateto')"
                  ngbDatepicker #d2="ngbDatepicker">
                <div class="input-group-append">
                  <button class="btn btn-outline-info no-shadow" (click)="d2.toggle()" type="button">
                    <i class="far fa-calendar-alt"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.start.time" | translate}}</small>
              <input type="time" class="form-control col-lg-6 col-md-6 col-sm-6 " [(ngModel)]="__wf__timestart"
                (change)="timeChange()">
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.end.time" | translate}}</small>
              <input type="time" class="form-control col-lg-6 col-md-6 col-sm-6 " [(ngModel)]="__wf__timestop"
                (change)="timeChange()">
            </div>
          </div>
          <div class="col-md-12 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.pay.date" | translate}}</small>
              <div class="input-group">
                <input class="form-control col-md-6 col-sm-6 col-lg-6" placeholder="{{'dd.mm.yyyy' | translate}}"
                  name="dp3" [(ngModel)]="__wf__payment_date" (ngModelChange)="dateChange('__wf__payment_date')"
                  ngbDatepicker #d3="ngbDatepicker">
                <div class="input-group-append">
                  <button class="btn btn-outline-info no-shadow" (click)="d3.toggle()" type="button">
                    <i class="far fa-calendar-alt"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.register.cost" | translate}} : {{"systemcode.bth" |
                translate}}</small>
              <input type="text" class="form-control col-lg-6 col-md-6 col-sm-6 " [(ngModel)]="__wf__training_value"
                (change)="toMoney()">
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.tax" | translate}} : {{"systemcode.percent" | translate}}</small>
              <input type="text" class="form-control col-lg-6 col-md-6 col-sm-6 " [(ngModel)]="__wf__tax7_value">
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"system.total" | translate}} : {{"systemcode.bth" |
                translate}}</small>
              <input type="text" class="form-control col-lg-6 col-md-6 col-sm-6 "
                value="{{__wf__training_value?__wf__tax7_value?calTax():'':''}}" disabled>
            </div>
          </div>
          <div class="col-12 p-0">
            <app-workflow-remark [wfid]="wfid"></app-workflow-remark>
          </div>
        </div>
      </div>
    </div>
  </div>







  <!-- เหตุผล -->
  <div class="col-12">
    <div class="card mb-0">
      <div class="card-header bg-myhr">
        <h6 class="card-title">{{"systemcode.note" | translate}}</h6>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-12 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"systemcode.note"| translate}}</small>
              <textarea class="form-control" rows="2" style="resize: none;" [(ngModel)]="remark"
                placeholder='{{"systemcode.note"| translate}}'></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- เอกสารอ้างอิง -->
  <div class="col-12" *ngIf="runno&&workflowData">
    <div class="card mb-0">
      <div class="card-header bg-myhr">
        <h6 class="card-title">{{"Doc Reference" | translate}}</h6>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <h6 class="cursor-myhr" (click)="openDocReference()">
                {{translateService.currentLang=="th"?workflowData.thaiSubject:workflowData.engSubject}}
                [{{workflowData.doc_no}}]
              </h6>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- แนบไฟล์ -->
  <div class="col-12">
    <div class="card mb-0">
      <div class="card-header bg-myhr">
        <h6 class="card-title">{{"attach_file" | translate}}</h6>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group">
              <small class="text-muted">{{"selected_file"| translate}}</small>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text">{{"upload_file"|translate}}</span>
                </div>
                <div class="custom-file">
                  <input #fileInput type="file" class="custom-file-input" id="inputGroupFile01" title=""
                    (change)="onFileSelected($event)"
                    accept="{{uploadConfig?uploadConfig.filter.replaceAll('*',''):''}}">
                  <label class="custom-file-label col-lg-12 col-md-12 col-sm-12" for="inputGroupFile01">{{nameFile |
                    translate}}</label>
                </div>


              </div>
            </div>
          </div>
          <div class="col-md-6 col-xs-12 b-r">
            <div class="form-group " style="margin-top: 20px;">
              <button type="button" class="btn btn-danger" (click)="resetIMG()">{{"cancel"| translate}}</button>
            </div>
          </div>
          <div class="col-md-12 col-xs-12 b-r" *ngIf="uploadConfig">
            <p class="text-danger m-b-0">{{"Maximum upload size" | translate}} {{uploadConfig.maxSize/1024/1024}} MB</p>
            <p class="text-danger">{{"Extensions are support" | translate}} {{uploadConfig.filter}}</p>
          </div>
        </div>
      </div>
    </div>


    <div class="card-body ">
      <div class="d-flex no-block align-items-center justify-content-center">
        <div class="action-form">
          <div class="form-group m-b-0 text-center">
            <button [disabled]="checkSubmit()" type="submit" class="btn btn-success waves-effect waves-light"
              (click)="openOnSubmit()"><i class=" fas fa-check"></i>
              {{"Submit" | translate}}</button>

          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Row ปิดใบขออนุมัติฝึกอบรมและสัมมนาภายนอก -->

  <!-- Modal สำเนาถึง -->
  <ng-template #modalCC let-modal>
    <div class="modal-content dialog-height">
      <div class="modal-body" [perfectScrollbar]="config">
        <div class="card" style="margin-bottom:-15px">
          <div class="card-header bg-myhr">
            <h5 class="card-title">{{"menu.employee-list" | translate}}</h5>
          </div>
          <div class="card-body pb-0 pt-1">
            <div class="d-flex mb-1">
              <input type="text" placeholder="{{'Name-Surname' | translate}}" class="form-control w-50">
            </div>
            <div class="table-responsive">
              <div class="wrapper">
                <table class="table  table-hover  table-sm  mb-0 no-wrap v-middle">
                  <thead class="bg-info ">
                    <tr class="text-white font-weight-normal">
                      <th class="font-weight-normal text-center" scope="col">{{"systemcode.emp.id" | translate}}</th>
                      <th class="font-weight-normal text-center" scope="col">{{"systemcode.emp.name" | translate}}</th>
                      <th class="font-weight-normal text-center" scope="col">{{"systemcode.position"| translate}}</th>
                      <th class="font-weight-normal text-center" scope="col"></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="bg-myhr" colspan="4">Executive Office 3 :</td>
                    </tr>
                    <tr>
                      <td class="font-weight-normal text-center">540954</td>
                      <td class="font-weight-normal text-center">นายชัยยันต์ เค้าแคน</td>
                      <td class="font-weight-normal text-center">Executive Office</td>
                      <td class="font-weight-normal text-center"><button type="button" class="btn btn-info btn-sm"
                          style="width: 60px;"> {{"choose"| translate}}</button></td>
                    </tr>
                    <tr>
                      <td class="font-weight-normal text-center">570906</td>
                      <td class="font-weight-normal text-center">นายสามารถ เนื่องศรี</td>
                      <td class="font-weight-normal text-center">Executive Office</td>
                      <td class="font-weight-normal text-center"><button type="button" class="btn btn-info btn-sm"
                          style="width: 60px;"> {{"choose"| translate}}</button></td>
                    </tr>
                    <tr>
                      <td class="bg-myhr" colspan="4">Operations :</td>
                    </tr>
                    <tr>
                      <td class="font-weight-normal text-center">580109</td>
                      <td class="font-weight-normal text-center">นางสาวนิตยา เนมขุนทด</td>
                      <td class="font-weight-normal text-center">Marketing Officer</td>
                      <td class="font-weight-normal text-center"><button type="button" class="btn btn-info btn-sm"
                          style="width: 60px;"> {{"choose"| translate}}</button></td>
                    </tr>
                    <tr>
                      <td class="font-weight-normal text-center">580109</td>
                      <td class="font-weight-normal text-center">นางสาวนิตยา เนมขุนทด</td>
                      <td class="font-weight-normal text-center">Marketing Officer</td>
                      <td class="font-weight-normal text-center"><button type="button" class="btn btn-info btn-sm"
                          style="width: 60px;"> {{"choose"| translate}}</button></td>
                    </tr>
                    <tr>
                      <td class="font-weight-normal text-center">580109</td>
                      <td class="font-weight-normal text-center">นางสาวนิตยา เนมขุนทด</td>
                      <td class="font-weight-normal text-center">Marketing Officer</td>
                      <td class="font-weight-normal text-center"><button type="button" class="btn btn-info btn-sm"
                          style="width: 60px;"> {{"choose"| translate}}</button></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="d-flex justify-content-end p-2">

              <select class="form-select m-r-5" style="width: auto" [(ngModel)]="pageSize" (ngModelChange)="page=1">
                <option [ngValue]="10">{{"Items per page" | translate}}: 10</option>
                <option [ngValue]="50">{{"Items per page" | translate}}: 50</option>
                <option [ngValue]="100">{{"Items per page" | translate}}: 100</option>
              </select>
              <ngb-pagination [collectionSize]="collectionSize" [(page)]="page" [pageSize]="pageSize" [maxSize]="3"
                [rotate]="true">
                <ng-template ngbPaginationPrevious>{{"Prev" | translate}}</ng-template>
                <ng-template ngbPaginationNext>{{"Next" | translate}}</ng-template>
              </ngb-pagination>

            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="modal.close('Close click')">{{"Close" |
          translate}}</button>
      </div>
    </div>
  </ng-template>

  <!-- แจ้งเตือน -->
  <ng-template #alertModal let-modal>
    <div class="modal-header">
      <h5 class="modal-title" id="editLabel">Alert Message</h5>
      <button type="button" class="close" (click)="modal.dismiss('Cross click')" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      {{msg}}
    </div>
  </ng-template>
  <ng-template #confirmModal let-modal>
    <div class="modal-header">
      <h5 class="modal-title" id="editLabel">{{"Alert Message" | translate}}</h5>
      <button type="button" class="close" (click)="closeBtnClick()" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      {{msg | translate}}
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-info" (click)="onSubmit();modal.close('Close click')">{{"confirm"|
        translate}}</button> <button type="button" class="btn btn-danger" (click)="closeBtnClick()">{{"cancel"|
        translate}}</button>
    </div>
  </ng-template>

  <ng-template #DocReferenceModal let-modal>
    <div class="modal-content dialog-height">
      <div class="modal-header">
        <h5 class="modal-title" id="editLabel">{{"systemcode.documents.detail" | translate}}</h5>
        <button type="button" class="close" (click)="closeBtnClick()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" [perfectScrollbar]="config">
        <div class="card" style="margin-bottom:-15px">
          <div class="card-body">
            <!-- ใส่เอกสารตรงนี้นะจ๊ะ -->
            <ng-template #workflowView [ngComponentOutlet]="dynamicComponent" [ndcDynamicInputs]="inputs"
              [ndcDynamicOutputs]="outputs"></ng-template>
            <!-- <app-wel210-nstda-create></app-wel210-nstda-create> -->
          </div>
        </div>
        <div class="d-flex no-block align-items-center justify-content-center mt-4">
          <div class="action-form">
            <div class="form-group m-b-0 text-center">
              <button type="button" class="btn btn-danger" (click)="onCancel()"><i class=" fas fa-times"></i>
                {{"cancel" |translate}}</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-info" (click)="closeBtnClick()">{{"confirm"| translate}}</button>
      </div>
    </div>
  </ng-template>
  <ng-template #cancelModal let-modal>
    <div class="modal-header">
      <h5 class="modal-title" id="editLabel">{{"Alert Message" | translate}}</h5>
      <button type="button" class="close" (click)="modal.dismiss('Cross click')" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      {{msg | translate}}
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-info" (click)="cancelWF()">{{"confirm"| translate}}</button> <button
        type="button" class="btn btn-danger" (click)="modal.dismiss('Cross click')">{{"cancel"| translate}}</button>
    </div>
  </ng-template>
