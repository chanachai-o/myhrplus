<div class="modal-content dialog-height">
    <div class="modal-body p-0" perfectScrollbar>
        <div class="card" style="margin-bottom: 0px !important">
            <div class="card-header bg-myhr">
                <h4>{{"menu.employee-list" | translate}}</h4>
            </div>
            <div class="card-body pt-0 pt-2">
                <div class="row">
                    <div class="col-12 col-md-6">
                        <div class="d-flex mb-1">
                            <input type="text" placeholder="{{'Name-Surname' | translate}}, {{'Employee ID' | translate}}, {{'Position' | translate}} {{'and_all_bu' | translate}}"
                                class="form-control" [(ngModel)]="employeeSearch" (ngModelChange)="searchData($event)">
                        </div>
                    </div>
                    <div class="col-12">
                        <ng-container *ngIf="!typeCheckBox then NoCheckBox"></ng-container>
                        <ng-container *ngIf="typeCheckBox then CheckBox"></ng-container>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <div *ngIf="typeCheckBox">
            <button type="button" class="btn btn-success" (click)="checkBoxClose()">
                {{"choose"| translate}}
            </button>
            &nbsp;
        </div>
        <button type="button" class="btn btn-danger" (click)="activeModal.dismiss()">
            {{"Close"| translate}}
        </button>
    </div>
</div>

<ng-template #NoCheckBox>
    <div class="table-responsive">
        <table class="table  table-hover table-striped-myhr table-sm  mb-0 no-wrap v-middle ">
            <thead class="bg-info ">
                <tr class="text-white font-weight-normal">
                    <th class="font-weight-normal text-nowrap" scope="col">{{"No."| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{"Employee ID"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{"Name-Surname"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{"Position"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU1"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU1"):"Bu1"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU2"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU2"):"Bu2"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU3"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU3"):"Bu3"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU4"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU4"):"Bu4"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU5"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU5"):"Bu5"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU6"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU6"):"Bu6"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU7"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU7"):"Bu7"| translate}}</th>
                </tr>
            </thead>
            <tbody *ngIf="employeeListLoading">
                <tr>
                    <td colspan="100%" class="font-weight-normal text-center">
                        <div class="justify-content-center text-center" role="status">
                            <div *ngFor="let item of [1,2,3]" class="spinner-grow text-info" role="status"
                                style="margin: 5px;">
                                <span class="sr-only">Loading...</span>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
            <tbody *ngIf="!employeeListLoading&&empFilter.length == 0">
                <tr>
                    <td colspan="100%" class="font-weight-normal text-center">
                        {{"No Data Found" | translate}}
                    </td>
                </tr>
            </tbody>
            <tbody *ngIf="!employeeListLoading&&empFilter.length != 0">
                <tr class="cursor-myhr"
                    *ngFor="let item of empFilter |slice: (page-1) * pageSize : (page-1) * pageSize + pageSize ; let i=index"
                    (click)="activeModal.close(item)">
                    <td class="align-middle text-center" scope="row">
                        {{(i+1)+((page-1) * pageSize)}}
                    </td>
                    <td class="align-middle text-nowrap">{{ checkText(item.employeeId)}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.getFullname())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.position.getPositionDesc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.bu1?.getBu1Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.bu2?.getBu2Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.bu3?.getBu3Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.bu4?.getBu4Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.bu5?.getBu5Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.bu6?.getBu6Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.bu7?.getBu7Desc())}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- <div class="d-flex justify-content-end p-2">
        <select class="form-select m-r-5" style="width: auto" [(ngModel)]="pageSize" (ngModelChange)="page=1">
            <option [ngValue]="10">{{"Items per page" | translate}}: 10</option>
            <option [ngValue]="50">{{"Items per page" | translate}}: 50</option>
            <option [ngValue]="100">{{"Items per page" | translate}}: 100</option>
        </select>
        <ngb-pagination [collectionSize]="empFilter.length" [(page)]="page" [pageSize]="pageSize" [maxSize]="3"
            [rotate]="true">
            <ng-template ngbPaginationPrevious>{{"Prev" | translate}}</ng-template>
            <ng-template ngbPaginationNext>{{"Next" | translate}}</ng-template>
        </ngb-pagination>
    </div> -->

    <div class="d-flex flex-column flex-md-row justify-content-between align-items-center p-2 gap-2">
        <div class="d-flex ">
          <select class="form-select" [(ngModel)]="pageSize" (ngModelChange)="page=1">
            <option [ngValue]="10">{{"Items per page" | translate}}: 10</option>
            <option [ngValue]="50">{{"Items per page" | translate}}: 50</option>
            <option [ngValue]="100">{{"Items per page" | translate}}: 100</option>
          </select>
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <ngb-pagination  [collectionSize]="empFilter.length" [(page)]="page" [pageSize]="pageSize" [maxSize]="3" [rotate]="true" >
            <ng-template ngbPaginationPrevious>{{"Prev" | translate}}</ng-template>
            <ng-template ngbPaginationNext>{{"Next" | translate}}</ng-template>
          </ngb-pagination>
        </div>
      </div>

</ng-template>

<ng-template #CheckBox>
    <div class="table-responsive">
        <table class="table  table-hover table-striped-myhr table-sm  mb-0 no-wrap v-middle ">
            <thead class="bg-info ">
                <tr class="text-white font-weight-normal">
                    <th claclass="font-weight-normal width-table align-middle" scope="col">
                        <div class="custom-control custom-checkbox cursor-myhr">
                            <input type="checkbox" class="custom-control-input" id="CheckboxAll"
                                (click)="checkboxAll($event.target.checked)">
                            <label class="custom-control-label font-weight-normal cursor-myhr" for="CheckboxAll">
                            </label>
                        </div>
                    </th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{"No."| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{"Employee ID"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{"Name-Surname"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{"Position"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU1"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU1"):"Bu1"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU2"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU2"):"Bu2"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU3"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU3"):"Bu3"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU4"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU4"):"Bu4"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU5"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU5"):"Bu5"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU6"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU6"):"Bu6"| translate}}</th>
                    <th class="font-weight-normal text-nowrap" scope="col">{{(SwaplangCodeService.getSwapLangCodeFromModelList("BU7"))?SwaplangCodeService.getSwapLangCodeFromModelList("BU7"):"Bu7"| translate}}</th>
                </tr>
            </thead>
            <tbody *ngIf="employeeListLoading">
                <tr>
                    <td colspan="100%" class="font-weight-normal text-center">
                        <div class="justify-content-center text-center" role="status">
                            <div *ngFor="let item of [1,2,3]" class="spinner-grow text-info" role="status"
                                style="margin: 5px;">
                                <span class="sr-only">Loading...</span>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
            <tbody *ngIf="!employeeListLoading&&empCheckBoxFilter.length == 0">
                <tr>
                    <td colspan="100%" class="font-weight-normal text-center">
                        {{"No Data Found" | translate}}
                    </td>
                </tr>
            </tbody>
            <tbody *ngIf="!employeeListLoading&&empCheckBoxFilter.length != 0">
                <tr
                    *ngFor="let item of empCheckBoxFilter |slice: (page-1) * pageSize : (page-1) * pageSize + pageSize ; let i=index">
                    <td class="font-weight-normal text-center">
                        <div class="custom-control custom-checkbox ">
                            <input type="checkbox" class="custom-control-input cursor-myhr"
                                [id]="'checkboxAccept'+(((page-1) * pageSize)+(i+1))" [(ngModel)]="item.checkbox">
                            <label class="custom-control-label font-weight-normal cursor-myhr"
                                [for]="'checkboxAccept'+(((page-1) * pageSize)+(i+1))">
                            </label>
                        </div>
                    </td>
                    <td class="align-middle text-center" scope="row">
                      {{(i+1)+((page-1) * pageSize)}}
                    </td>
                    <td class="align-middle text-nowrap">{{ checkText(item.data.employeeId)}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.data.getFullname())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.data.position.getPositionDesc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.data.bu1?.getBu1Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.data.bu2?.getBu2Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.data.bu3?.getBu3Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.data.bu4?.getBu4Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.data.bu5?.getBu5Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.data.bu6?.getBu6Desc())}}</td>
                    <td class="align-middle text-nowrap">{{ checkText(item.data.bu7?.getBu7Desc())}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- <div class="d-flex justify-content-end p-2">
        <select class="form-select m-r-5" style="width: auto" [(ngModel)]="pageSize" (ngModelChange)="page=1">
            <option [ngValue]="10">{{"Items per page" | translate}}: 10</option>
            <option [ngValue]="50">{{"Items per page" | translate}}: 50</option>
            <option [ngValue]="100">{{"Items per page" | translate}}: 100</option>
        </select>
        <ngb-pagination [collectionSize]="empCheckBoxFilter.length" [(page)]="page" [pageSize]="pageSize" [maxSize]="3"
            [rotate]="true">
            <ng-template ngbPaginationPrevious>{{"Prev" | translate}}</ng-template>
            <ng-template ngbPaginationNext>{{"Next" | translate}}</ng-template>
        </ngb-pagination>
    </div> -->

    <div class="d-flex flex-column flex-md-row justify-content-between align-items-center p-2 gap-2">
        <div class="d-flex ">
          <select class="form-select" [(ngModel)]="pageSize" (ngModelChange)="page=1">
            <option [ngValue]="10">{{"Items per page" | translate}}: 10</option>
            <option [ngValue]="50">{{"Items per page" | translate}}: 50</option>
            <option [ngValue]="100">{{"Items per page" | translate}}: 100</option>
          </select>
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <ngb-pagination [collectionSize]="empCheckBoxFilter.length" [(page)]="page" [pageSize]="pageSize" [maxSize]="3"  [rotate]="true" >
            <ng-template ngbPaginationPrevious>{{"Prev" | translate}}</ng-template>
            <ng-template ngbPaginationNext>{{"Next" | translate}}</ng-template>
          </ngb-pagination>
          
        </div>
      </div>

</ng-template>
