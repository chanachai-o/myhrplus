<div class="modal-header">
    <h5 class="modal-title" id="editLabel">{{pageName | translate}}</h5>
    <button type="button" class="close" (click)="activeModal.dismiss('dismiss')" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

<div class="modal-body">
    <div *ngIf="logo" class="row justify-content-end col-12" style="position: absolute;right: 1vw;">
        <img [src]="logo" style="width: 115px;margin-bottom: 5px;" class="light-logo" alt="homepage" />
    </div>
    <div class="row">
        <div class="offset-2 col-1 col-1-5">
            <label class="col-form-label">{{'Name'| translate }}</label>
        </div>
        <div class="col-auto">
            <label class="col-form-label">{{workings.getFullname()}}</label>
        </div>
        <div class="col-auto">
            <label class="col-form-label">{{"Employee ID"| translate}}</label>
        </div>
        <div class="col">
            <label class="col-form-label">{{workings.employeeId}}</label>
        </div>
    </div>
    <div class="row">
        <div class="offset-2 col-1 col-1-5">
            <label class="col-form-label">{{"Position"| translate}}</label>
        </div>
        <div class="col">
            <label class="col-form-label">{{checkWord(workings.position?.getPositionDesc())}}</label>
        </div>
    </div>
    <div class="row">
        <div class="offset-2 col-1 col-1-5">
            <label class="col-form-label">{{"สาย/ฝ่าย"| translate}}</label>
        </div>
        <div class="col">
            <label class="col-form-label">{{checkWord(workings.bu1?.getBu1Desc())}}</label>
        </div>
    </div>
    <div class="row">
        <div class="offset-2 col-1 col-1-5">
            <label class="col-form-label">{{getSwaplang("BU2")| translate}}/{{getSwaplang("BU3")| translate}}</label>
        </div>
        <div class="col">
            <label class="col-form-label">{{checkWord(workings.bu2?.getBu2Desc())}}</label>
        </div>
    </div>
    <div class="row">
        <div class="offset-2 col-1 col-1-5">
            <label class="col-form-label">{{'Boss'| translate }}</label>
        </div>
        <div class="col">
            <label class="col-form-label">{{checkWord(workings.bossId)}}</label>
        </div>
    </div>
    <div class="row">
        <div class="offset-2 col-1 col-1-5">
            <label class="col-form-label">{{'system.start.date'| translate }}</label>
        </div>
        <div class="col-auto">
            <label class="col-form-label">
                {{workings.firstHiredate?
                (workings.firstHiredate | date:'dd/MM/yyyy'):'-'}}
            </label>
        </div>
        <div class="col-auto">
            <label class="col-form-label">{{'Years of service'| translate }}</label>
        </div>
        <div class="col">
            <label class="col-form-label">
                {{ dateGenerate('year') }} {{ 'systemcode.year' | translate}} {{ dateGenerate('month') }}
                {{ 'systemcode.month' | translate}} {{ dateGenerate('day') }} {{ 'systemcode.day' | translate}}
            </label>
        </div>
    </div>
    <div class="row justify-content-center" style="padding-top: 16px;">
        <div class="col-12 d-flex justify-content-center">
            <ng-container
                *ngTemplateOutlet="pageName == 'Probation Evaluation Form'?probationaryEvaluationForm:false"></ng-container>
            <ng-container
                *ngTemplateOutlet="pageName == 'Acting Appraisal Form'?actingAppraisalForm:false"></ng-container>
            <ng-container
                *ngTemplateOutlet="pageName == 'Annual performance evaluation form'?probationaryEvaluationForm:false"></ng-container>
        </div>
    </div>
    <div class="row mt-3" *ngIf="formIndex >-1">
        <div class="col-12" *ngIf="pageName == 'Probation Evaluation Form'">
            <div *ngIf="formIndex == 0">
                <app-probation-evaluation-form-competency [jobName]="workings?.job?.getJobDesc()"
                    [job]="workings?.job?.jobcodeId" [step]="step" [masformDetail]="masformDetail"
                    [statusCompetency]="statusCompetency"
                    (competencySave)="competencySave = $event;checkChangForm=true"></app-probation-evaluation-form-competency>
            </div>
            <div *ngIf="formIndex == 1">
                <app-probation-evaluation-form-competency-final [jobName]="workings?.job?.getJobDesc()" [step]="step"
                    [masformFinalDetail]="masformFinalDetail" [statusCompetencyFinal]="statusCompetencyFinal"
                    (competencyFinalSave)="competencyFinalSave = $event;checkChangForm=true"></app-probation-evaluation-form-competency-final>
            </div>
            <div *ngIf="formIndex == 2">
                <app-kpi-form [jobName]="workings?.job?.getJobDesc()" [step]="step" [kpiformDetail]="kpiformDetail"
                    [job]="workings?.job?.jobcodeId" [masformDetail]="masformDetail"
                    [statusCompetencyKpi]="statusCompetencyKpi"
                    (kpiSave)="kpiSave = $event;checkChangForm=true"></app-kpi-form>
            </div>
            <div *ngIf="formIndex == 3">
                <app-sum-form [jobName]="workings?.job?.getJobDesc()" [step]="step"
                    [masformFinalDetail]="masformFinalDetail" [sumformDetail]="sumformDetail"
                    (sumformSave)="sumSave=$event"></app-sum-form>
            </div>
        </div>
        <div class="col-12" *ngIf="pageName == 'Acting Appraisal Form'">
            <div *ngIf="formIndex == 4">
                <app-probationary-overall-picture [jobName]="workings?.job?.getJobDesc()" [step]="step"
                    [clearData]="clearData" [detailMasform]="detailMasform"
                    [statusCompetencySummary]="statusCompetencySummary"
                    (overallSave)="overallSave = $event;checkChangForm=true"
                    [statusOverall]="statusOverall"></app-probationary-overall-picture>
            </div>
            <div *ngIf="formIndex == 0">
                <app-probationary-competency [jobName]="workings?.job?.getJobDesc()" [step]="step"
                    [job]="workings?.job?.jobcodeId" [masformDetail]="masformDetail"
                    [statusCompetency]="statusCompetency"
                    (competencySave)="competencySave = $event;checkChangForm=true"></app-probationary-competency>
            </div>
            <div *ngIf="formIndex == 1">
                <app-probationary-competency-final [jobName]="workings?.job?.getJobDesc()" [step]="step"
                    [masformFinalDetail]="masformFinalDetail" [statusCompetencyFinal]="statusCompetencyFinal"
                    (competencyFinalSave)="competencyFinalSave = $event;checkChangForm=true"></app-probationary-competency-final>
            </div>
            <div *ngIf="formIndex == 2">
                <app-probationary-kpi [jobName]="workings?.job?.getJobDesc()" [step]="step"
                    [job]="workings?.job?.jobcodeId" [kpiformDetail]="kpiformDetail" [masformDetail]="masformDetail"
                    [statusCompetencyKpi]="statusCompetencyKpi"
                    (kpiSave)="kpiSave = $event;checkChangForm=true"></app-probationary-kpi>
            </div>
            <div *ngIf="formIndex == 3">
                <app-probationary-sum [jobName]="workings?.job?.getJobDesc()" [step]="step"
                    [masformFinalDetail]="masformFinalDetail" [sumformDetail]="sumformDetail"
                    (sumformSave)="sumSave=$event"></app-probationary-sum>
            </div>
        </div>
        <div class="col-12" *ngIf="pageName == 'Annual performance evaluation form'">
            <div *ngIf="formIndex == 0">
                <app-annual-competency [jobName]="workings?.job?.getJobDesc()" [job]="workings?.job?.jobcodeId"
                    [masformDetail]="masformDetail" [step]="step" [statusCompetency]="statusCompetency"
                    (competencySave)="competencySave = $event;checkChangForm=true"></app-annual-competency>
            </div>
            <div *ngIf="formIndex == 1">
                <app-annual-competency-final [jobName]="workings?.job?.getJobDesc()" [job]="workings?.job?.jobcodeId"
                    [masformFinalDetail]="masformFinalDetail" [statusCompetencyFinal]="statusCompetencyFinal"
                    [step]="step"
                    (competencyFinalSave)="competencyFinalSave = $event;checkChangForm=true"></app-annual-competency-final>
            </div>
            <div *ngIf="formIndex == 2">
                <app-annual-kpi-form [jobName]="workings?.job?.getJobDesc()" [kpiformDetail]="kpiformDetail"
                    [step]="step" [masformDetail]="masformDetail" [statusCompetencyKpi]="statusCompetencyKpi"
                    (kpiSave)="kpiSave = $event;checkChangForm=true"></app-annual-kpi-form>
            </div>
            <div *ngIf="formIndex == 3">
                <app-annual-sum-form [jobName]="workings?.job?.getJobDesc()" [masformFinalDetail]="masformFinalDetail"
                    [step]="step" [sumformDetail]="sumformDetail" (sumformSave)="sumSave=$event"></app-annual-sum-form>
            </div>
        </div>
    </div>
    <div class="row justify-content-center" style="padding-top: 16px;"
        *ngIf="(pageName=='Probation Evaluation Form'||pageName=='Annual performance evaluation form' || pageName == 'Acting Appraisal Form')&&formIndex>-1">
        <div class="col-12 d-flex justify-content-center">
            <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1" (click)="saveform('0')"
                [ngClass]="{'d-none': closeButtonSave[formIndex][0]}">
                {{"บันทึกร่าง" | translate}}
            </button>
            <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1" (click)="saveform('1')"
                [ngClass]="{'d-none': closeButtonSave[formIndex][1]}">
                {{"ส่งแบบประเมิน" | translate}}
            </button>
            <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1" (click)="saveform('3')"
                [ngClass]="{'d-none': closeButtonSave[formIndex][2]}">
                {{"ประเมินแทน" | translate}}
            </button>
            <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1" (click)="clearForm()"
                [ngClass]="{'d-none': closeButtonSave[formIndex][3]}">
                {{"เคลียร์ค่า" | translate}}
            </button>
        </div>
    </div>
    <!-- <div class="row justify-content-center" style="padding-top: 16px;" *ngIf="(pageName == 'Acting Appraisal Form'&&formIndex==0&&statusCompetencyFinal!='supervisor_finish')||
    (pageName == 'Acting Appraisal Form'&&formIndex==1&&statusCompetency!='supervisor_finish')||
    (pageName == 'Acting Appraisal Form'&&formIndex==2&&statusCompetencyFinal!='supervisor_finish')||
    (pageName == 'Acting Appraisal Form'&&formIndex==3&&statusCompetencyKpi!='supervisor_finish')">
        <div class="col-12 d-flex justify-content-center">
            <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1"
                (click)="saveform('0')">
                {{"บันทึกร่าง" | translate}}
            </button>
            <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1"
                (click)="saveform('1')">
                {{"บันทึก" | translate}}
            </button>
            <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1"
                (click)="clearData=!clearData">
                {{"เคลียร์ค่า" | translate}}
            </button>
            <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1">
                {{"ส่งแบบประเมิน" | translate}}
            </button>
            <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1">
                {{"ประเมินแทน" | translate}}
            </button>
        </div>
    </div> -->
</div>
<ng-template #probationaryEvaluationForm>
    <div class="row justify-content-center" style="padding-top: 16px;">
        <div class="col-12 d-flex justify-content-center">
            <button type="button" style="width: 150px;"
                [class]="'btn text-white mx-1' + (pageName=='Annual performance evaluation form' ? ' custom-btn-blue':' btn-success')"
                (click)="checkChangFormAlert(0)">
                {{"Competency" | translate}}
            </button>
            <button type="button" style="width: 150px;"
                [class]="'btn text-white mx-1' + (pageName=='Annual performance evaluation form' ? ' custom-btn-blue':' btn-success')"
                (click)="checkChangFormAlert(1)">
                {{"Competency Final" | translate}}
            </button>
            <button type="button" style="width: 150px;"
                [class]="'btn text-white mx-1' + (pageName=='Annual performance evaluation form' ? ' custom-btn-blue':' btn-success')"
                (click)="checkChangFormAlert(2)">
                {{"KPI" | translate}}
            </button>
            <button type="button" style="width: 150px;"
                [class]="'btn text-white mx-1' + (pageName=='Annual performance evaluation form' ? ' custom-btn-blue':' btn-success')"
                *ngIf="sumformDetail && statusCompetency == 'supervisor_finish' && statusCompetencyFinal == 'supervisor_finish' && statusCompetencyKpi=='supervisor_finish'"
                (click)="checkChangFormAlert(3)">
                {{"Sum(Yearly)" | translate}}
            </button>
        </div>
    </div>
</ng-template>
<ng-template #actingAppraisalForm>
    <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1"
        (click)="checkChangFormAlert(4)">
        {{"ประเมินภาพรวม" | translate}}
    </button>
    <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1"
        (click)="checkChangFormAlert(0)">
        {{"Competency" | translate}}
    </button>
    <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1"
        (click)="checkChangFormAlert(1)">
        {{"Competency Final" | translate}}
    </button>
    <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1"
        (click)="checkChangFormAlert(2)">
        {{"KPI" | translate}}
    </button>
    <button type="button" style="width: 150px;" class="btn btn-success  text-white mx-1" *ngIf="sumformDetail"
        (click)="checkChangFormAlert(3)">
        {{"Sum(Yearly)" | translate}}
    </button>
</ng-template>




<!-- <div class="modal-footer">

</div> -->
