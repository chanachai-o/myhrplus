<ng-container *ngIf="masformDetail">
    <div class="row justify-content-end">
        <div class="row col-3 m-0" style="padding: 1px;">
            <div class="col-12" style="padding: 1px;" *ngFor="let item of masformDetail?.kpiCategory; let i=index">
                <div class="border-form-start">
                    {{item.tdesc}} = {{item.kcatId == -1 ? "N" : item.kcatId }}
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-12" style="padding: 1px;">
            <h3 class="border-form text-center">
                คุณสมบัติของผู้บริหารที่องค์กรคาดหวัง ระดับ {{jobName}}
            </h3>
        </div>
        <div class="col-1" style="padding: 1px;">
            <h6 class="border-form text-center">
                ลำดับ
            </h6>
        </div>
        <div class="col-3" style="padding: 1px;">
            <h6 class="border-form text-center">
                คุณสมบัติที่ต้องการ
            </h6>
        </div>
        <div class="row m-0 col-4 p-0">
            <div class="row m-0 col-7 p-0">
                <div class="col-12" style="padding: 1px;">
                    <h6 class="border-form text-center row">
                        <div class="col-12">
                            คุณ {{masformDetail.employee.prefix.tdesc}}{{masformDetail.employee.thFullName}}
                        </div>
                        <div class="col-12">
                            (Q1-Q2)
                        </div>
                    </h6>
                </div>
                <div class="row m-0 col-12 p-0">
                    <div class="col-6" style="padding: 1px;">
                        <h6 class="border-form text-center">
                            ประเมินตนเอง
                        </h6>
                    </div>
                    <div class="col-6" style="padding: 1px;">
                        <h6 class="border-form text-center">
                            ผู้บังคับบัญชา
                        </h6>
                    </div>
                </div>
            </div>
            <div class="col-5" style="padding: 1px;">
                <h6 class="border-form text-center row">
                    <div class="col-12">
                        วิธีการและแนวทางในการพัฒนา
                    </div>
                    <div class="col-12">
                        (คุณ {{masformDetail.employee.prefix.tdesc}}{{masformDetail.employee.thFullName}})
                    </div>
                </h6>
            </div>
        </div>
        <div class="row m-0 col-4 p-0">
            <div class="row m-0 col-7 p-0">
                <div class="col-12" style="padding: 1px;">
                    <h6 class="border-form text-center row">
                        <div class="col-12">
                            คุณ {{masformDetail.employee.prefix.tdesc}}{{masformDetail.employee.thFullName}}
                        </div>
                        <div class="col-12">
                            (Q3-Q4)
                        </div>
                    </h6>
                </div>
                <div class="row m-0 col-12 p-0">
                    <div class="col-6" style="padding: 1px;">
                        <h6 class="border-form text-center">
                            ประเมินตนเอง
                        </h6>
                    </div>
                    <div class="col-6" style="padding: 1px;">
                        <h6 class="border-form text-center">
                            ผู้บังคับบัญชา
                        </h6>
                    </div>
                </div>
            </div>
            <div class="col-5" style="padding: 1px;">
                <h6 class="border-form text-center row">
                    <div class="col-12">
                        วิธีการและแนวทางในการพัฒนา
                    </div>
                    <div class="col-12">
                        (คุณ {{masformDetail.employee.prefix.tdesc}}{{masformDetail.employee.thFullName}})
                    </div>
                </h6>
            </div>
        </div>
        <div class="col-4" style="padding: 1px;">
            <div class="border-form text-center">
                Total Average Score
            </div>
        </div>
        <div class="row m-0 col-4 p-0">
            <div class="row m-0 col-7 p-0">
                <div class="col-6" style="padding: 1px;">
                    <div class="border-form text-center">
                        {{selfQ1Q2TotalScore | minusOneCheck}}
                    </div>
                </div>
                <div class="col-6" style="padding: 1px;">
                    <div class="border-form text-center">
                        {{bossQ1Q2TotalScore | minusOneCheck}}
                    </div>
                </div>
            </div>
            <div class="col-5" style="padding: 1px;">
                <div class="border-form text-center row">
                </div>
            </div>
        </div>
        <div class="row m-0 col-4 p-0">
            <div class="row m-0 col-7 p-0">
                <div class="col-6" style="padding: 1px;">
                    <div class="border-form text-center">
                        {{selfQ3Q4TotalScore | minusOneCheck}}
                    </div>
                </div>
                <div class="col-6" style="padding: 1px;">
                    <div class="border-form text-center">
                        {{bossQ3Q4TotalScore | minusOneCheck}}
                    </div>
                </div>
            </div>
            <div class="col-5" style="padding: 1px;">
                <div class="border-form text-center row">
                </div>
            </div>
        </div>
        <ng-container *ngFor="let group of groupBySection;let i =index">
            <div class="col-4" style="padding: 1px;">
                <div class="border-form text-center">
                    {{group.key}}
                </div>
            </div>
            <div class="row m-0 col-4 p-0">
                <div class="row m-0 col-7 p-0">
                    <div class="col-6" style="padding: 1px;">
                        <div class="border-form text-center">
                        </div>
                    </div>
                    <div class="col-6" style="padding: 1px;">
                        <div class="border-form text-center">
                        </div>
                    </div>
                </div>
                <div class="col-5" style="padding: 1px;">
                    <div class="border-form text-center row">
                    </div>
                </div>
            </div>
            <div class="row m-0 col-4 p-0">
                <div class="row m-0 col-7 p-0">
                    <div class="col-6" style="padding: 1px;">
                        <div class="border-form text-center">
                        </div>
                    </div>
                    <div class="col-6" style="padding: 1px;">
                        <div class="border-form text-center">
                        </div>
                    </div>
                </div>
                <div class="col-5" style="padding: 1px;">
                    <div class="border-form text-center row">
                    </div>
                </div>
            </div>
            <ng-container *ngFor="let asform1Details of group.value;let l = index">
                <div class="col-4" style="padding: 1px;">
                    <div class="border-form" style="justify-content: start !important">
                        {{asform1Details.remarks}}
                    </div>
                </div>
                <div class="row m-0 col-4 p-0">
                    <div class="row m-0 col-7 p-0">
                        <div class="col-6" style="padding: 1px;">
                            <div class="border-form text-center">
                                {{groupBySection[i].value[l].selfQ1Q2TotalScore| minusOneCheck}}
                            </div>
                        </div>
                        <div class="col-6" style="padding: 1px;">
                            <div class="border-form text-center">
                                {{groupBySection[i].value[l].bossQ1Q2TotalScore| minusOneCheck}}
                            </div>
                        </div>
                    </div>
                    <div class="col-5" style="padding: 1px;">
                        <div class="border-form text-center row">
                        </div>
                    </div>
                </div>
                <div class="row m-0 col-4 p-0">
                    <div class="row m-0 col-7 p-0">
                        <div class="col-6" style="padding: 1px;">
                            <div class="border-form text-center">
                                {{groupBySection[i].value[l].selfQ3Q4TotalScore| minusOneCheck}}
                            </div>
                        </div>
                        <div class="col-6" style="padding: 1px;">
                            <div class="border-form text-center">
                                {{groupBySection[i].value[l].bossQ3Q4TotalScore| minusOneCheck}}
                            </div>
                        </div>
                    </div>
                    <div class="col-5" style="padding: 1px;">
                        <div class="border-form text-center row">
                        </div>
                    </div>
                </div>
                <ng-container *ngFor="let assessDetails of asform1Details.assessDetails;let m = index">
                    <div class="col-1" style="padding: 1px;">
                        <div class="border-form text-center">
                            {{dataArray[i][l][m]}}
                        </div>
                    </div>
                    <div class="col-3" style="padding: 1px;">
                        <div class="border-form" style="justify-content: start !important">
                            {{translateText(assessDetails.tdesc,assessDetails.edesc)}}
                        </div>
                    </div>
                    <div class="row m-0 col-4 p-0">
                        <div class="row m-0 col-7 p-0">
                            <div class="col-6" style="padding: 1px;">
                                <div class="border-form text-center">
                                    <!-- <input type="text" class="form-control"
                                        oninput="value = value.replace(/[^0-9]/g, '');"
                                        [disabled]="!statusCompetencyCheck('employee')||!step"
                                        [(ngModel)]="assessDetails.selfQ1Q2Score"
                                        (ngModelChange)="calSelfQ1Q2TotalScore(i,l);calAveSelfQ1Q2TotalScore()"> -->
                                    <select class="form-select m-r-5 w-100" [(ngModel)]="assessDetails.selfQ1Q2Score"
                                        (ngModelChange)="calSelfQ1Q2TotalScore(i,l);calAveSelfQ1Q2TotalScore()"
                                        [disabled]="statusCompetencyCheck('supervisor') || (step!='0'&& !(step=='1'&&job=='P008'))">
                                        <option *ngFor="let kpi of masformDetail?.kpiCategory; let i=index"
                                            [value]="kpi.kcatId">
                                            {{kpi.tdesc}} = {{kpi.kcatId == -1 ? "N" : kpi.kcatId }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-6" style="padding: 1px;">
                                <div class="border-form text-center">
                                    <!-- <input type="text" class="form-control"
                                        oninput="value = value.replace(/[^0-9]/g, '');"
                                        [disabled]="(!statusCompetencyCheck('supervisor')&&!statusCompetencyCheck('supervisor_override'))||!step"
                                        [(ngModel)]="assessDetails.bossQ1Q2Score"
                                        (ngModelChange)="calBossQ1Q2TotalScore(i,l);calAveBossQ1Q2TotalScore()"> -->
                                    <select class="form-select m-r-5 w-100" [(ngModel)]="assessDetails.bossQ1Q2Score"
                                        (ngModelChange)="calBossQ1Q2TotalScore(i,l);calAveBossQ1Q2TotalScore()"
                                        [disabled]="statusCompetencyCheck('employee') || statusCompetencyCheck('supervisor_finish')||step=='0'||!step">
                                        <option *ngFor="let kpi of masformDetail?.kpiCategory; let i=index"
                                            [value]="kpi.kcatId">
                                            {{kpi.tdesc}} = {{kpi.kcatId == -1 ? "N" : kpi.kcatId }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-5" style="padding: 1px;">
                            <div class="border-form">
                                <textarea class="w-100" [(ngModel)]="assessDetails.selfQ1Q2Remark"
                                    [disabled]="statusCompetencyCheck('supervisor') || (step!='0'&& !(step=='1'&&job=='P008'))"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="row m-0 col-4 p-0">
                        <div class="row m-0 col-7 p-0">
                            <div class="col-6" style="padding: 1px;">
                                <div class="border-form text-center">
                                    <!-- <input type="text" class="form-control"
                                        oninput="value = value.replace(/[^0-9]/g, '');"
                                        [disabled]="!statusCompetencyCheck('employee')||!step"
                                        [(ngModel)]="assessDetails.selfQ3Q4Score"
                                        (ngModelChange)="calSelfQ3Q4TotalScore(i,l);calAveSelfQ3Q4TotalScore()"> -->
                                    <select class="form-select m-r-5 w-100" [(ngModel)]="assessDetails.selfQ3Q4Score"
                                        (ngModelChange)="calSelfQ3Q4TotalScore(i,l);calAveSelfQ3Q4TotalScore()"
                                        [disabled]="statusCompetencyCheck('supervisor') || (step!='0'&& !(step=='1'&&job=='P008'))">
                                        <option *ngFor="let kpi of masformDetail?.kpiCategory; let i=index"
                                            [value]="kpi.kcatId">
                                            {{kpi.tdesc}} = {{kpi.kcatId == -1 ? "N" : kpi.kcatId }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-6" style="padding: 1px;">
                                <div class="border-form text-center">
                                    <!-- <input type="text" class="form-control"
                                        oninput="value = value.replace(/[^0-9]/g, '');"
                                        [disabled]="(!statusCompetencyCheck('supervisor')&&!statusCompetencyCheck('supervisor_override'))||!step"
                                        [(ngModel)]="assessDetails.bossQ3Q4Score"
                                        (ngModelChange)="calBossQ3Q4TotalScore(i,l);calAveBossQ3Q4TotalScore()"> -->
                                    <select class="form-select m-r-5 w-100" [(ngModel)]="assessDetails.bossQ3Q4Score"
                                        (ngModelChange)="calBossQ3Q4TotalScore(i,l);calAveBossQ3Q4TotalScore()"
                                        [disabled]="statusCompetencyCheck('employee') || statusCompetencyCheck('supervisor_finish')||step=='0'||!step">
                                        <option *ngFor="let kpi of masformDetail?.kpiCategory; let i=index"
                                            [value]="kpi.kcatId">
                                            {{kpi.tdesc}} = {{kpi.kcatId == -1 ? "N" : kpi.kcatId }}
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="col-5" style="padding: 1px;">
                            <div class="border-form">
                                <textarea class="w-100" [(ngModel)]="assessDetails.selfQ3Q4Remark"
                                    [disabled]="statusCompetencyCheck('supervisor_finish')||!step"></textarea>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </ng-container>
        </ng-container>
    </div>

    <div class="row justify-content-end">
        <div class="row col-6 m-0" style="padding: 1px;">
            <div class="col-6" style="padding: 1px;">
                <div class="border-form text-center">
                    จุดเด่น (Strengthen)
                </div>
            </div>
            <div class="col-6" style="padding: 1px;">
                <div class="border-form text-center">
                    ข้อที่ต้องปรับปรุง
                </div>
            </div>
            <div class="col-6" style="padding: 1px;">
                <div class="border-form">
                    <textarea [(ngModel)]="masformDetail.selfStrengthen"
                        [disabled]="statusCompetencyCheck('supervisor_finish')||!step" maxlength="5000"></textarea>
                </div>
            </div>
            <div class="col-6" style="padding: 1px;">
                <div class="border-form">
                    <textarea [(ngModel)]="masformDetail.selfDevelop"
                        [disabled]="statusCompetencyCheck('supervisor_finish')||!step" axlength="5000"></textarea>
                </div>
            </div>
        </div>
    </div>
</ng-container>
