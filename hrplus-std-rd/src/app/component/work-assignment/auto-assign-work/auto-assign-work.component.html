<div class="card">
    <div class="card-header bg-myhr" >
      <h4>{{"auto.assign.workflow" | translate}}</h4>
    </div>
    <div class="card-body " >
            <!-- นิยามเวิร์คโฟล์ -->
            <div class="row ">
                <div class="offset-md-1 col-md-3 col-12 col-sm-12">
                    <div class="form-group">
                      <div class="input-group mb-3">
                        <input type="text" class="form-control" placeholder="{{'assing.user.code'| translate }}" aria-describedby="basic-addon1">
                        <div class="input-group-append">
                          <button class="btn me-0 btn-info" type="button"><i
                              class="fa fa-search"></i></button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4 col-4 col-sm-8">
                    <div class="form-group">
                      <input type="text" placeholder="{{'Name-Surname'| translate }}" class="form-control"disabled>
                    </div>
                  </div>
            </div>
            <div class="row ">
                <div class="offset-md-1 col-md-3 col-12 col-sm-12">
                <div class="form-group">
                    <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="{{'workflow.id'| translate }}" aria-describedby="basic-addon1">
                    <div class="input-group-append">
                        <button class="btn me-0 btn-info" type="button"><i
                            class="fa fa-search"></i></button>
                    </div>
                    </div>
                </div>
                </div>
                <div class="col-md-3 col-4 col-sm-4">
                <div class="form-group">
                    <input type="text" placeholder="{{'workflow.tname'| translate }}" class="form-control"disabled>
                </div>
                </div>
                <div class="col-md-3 col-6 col-sm-4">
                <div class="form-group">
                    <input type="text" placeholder="{{'workflow.ename'| translate }}" class="form-control"disabled>
                </div>
                </div>
            </div>
            <div class="row">
                <div class="offset-md-1 col-md-2 col-xs-3">
                    <div class="form-group">
                        <input type="text" placeholder="{{'workflow.version'| translate }}" class="form-control"disabled>
                    </div>
                </div>
                <div class="col-md-2 col-xs-3">
                    <div class="form-group">
                        <input type="text" placeholder="{{'category'| translate }}" class="form-control"disabled>
                    </div>
                </div>
            </div>
        <div class="row justify-content-center mt-2">
            <div class="col-12 col-md-10 col-lg-10">
                <div class="table-responsive">
                    <div class="wrapper">
                        <table class="table  table-hover table-striped-myhr table-sm  mb-0 no-wrap v-middle ">
                            <thead class="bg-info " >
                            <tr class="text-white font-weight-normal">
                              <th class="font-weight-normal width-table text-center " scope="col">
                                <input type="checkbox" >

                              </th>
                              <th class="font-weight-normal width-table text-center" scope="col">{{"No."| translate}}</th>
                              <th class="font-weight-normal width-table text-center" scope="col">{{"assing.user.code"| translate}}</th>
                              <th class="font-weight-normal width-table text-center" scope="col">{{"Name-Surname"| translate}}</th>
                              <th class="font-weight-normal width-table text-center" scope="col">{{"Start Date"| translate}}</th>
                              <th class="font-weight-normal width-table text-center" scope="col">{{"End Date"| translate}}</th>
                            </tr>
                            </thead>
                            <!-- <tbody>
                              <tr >
                                <td colspan="3" class="font-weight-normal text-center">
                                  <div class="justify-content-center text-center" role="status" >
                                    <div class="spinner-grow text-info" role="status" style="margin: 5px;">
                                      <span class="sr-only">Loading...</span>
                                    </div>
                                    <div class="spinner-grow text-info" role="status" style="margin: 5px;">
                                      <span class="sr-only">Loading...</span>
                                    </div>
                                    <div class="spinner-grow text-info" role="status" style="margin: 5px;">
                                      <span class="sr-only">Loading...</span>
                                    </div>
                                  </div>
                                </td>
                              </tr>
                            </tbody> -->
                            <!-- <tbody >
                                <tr *ngIf="empHrShow.length == 0 && !firstData">
                                    <td colspan="3" class="font-weight-normal text-center">{{"No Data Found" | translate}}</td>
                                  </tr>
                              <tr *ngFor="let emp of empHrShow | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize ;let i= index">
                                <td class="align-middle text-center"> 
                                  <input type="checkbox"  [(ngModel)]="empCheckbox[((page-1) * pageSize)+i].select">
                                </td>
                                <td  (click)="empCheckbox[((page-1) * pageSize)+i].select = !empCheckbox[((page-1) * pageSize)+i].select"  class="align-middle text-center">{{ emp.employeeId}}</td>
                                <td (click)="empCheckbox[((page-1) * pageSize)+i].select = !empCheckbox[((page-1) * pageSize)+i].select" class="align-middle text-center">{{ emp.getFullname()?emp.getFullname():'-'}}</td>
                              </tr>
                            </tbody> -->
                        </table>
                    </div>
                <!-- </div>
                <div class="d-flex justify-content-end p-2" *ngIf="empHrShow.length != 0">

                    <select class="form-select m-r-5" style="width: auto"  [(ngModel)]="pageSize">
                      <option [ngValue]="10">{{"Items per page"| translate}}: 10</option>
                      <option [ngValue]="50">{{"Items per page"| translate}}: 50</option>
                      <option [ngValue]="100">{{"Items per page"| translate}}: 100</option>
                    </select>
        
                    <ngb-pagination [collectionSize]="collectionSize" [(page)]="page" [pageSize]="pageSize"  [maxSize]="3" [rotate]="true"  >
                      <ng-template ngbPaginationPrevious>{{"Prev"| translate}}</ng-template>
                      <ng-template ngbPaginationNext>{{"Next"| translate}}</ng-template>
                    </ngb-pagination>
        
        
                  </div> -->
        
                <div class="col-md-12 col-xs-12 b-r" >
                    <div class="d-flex no-block align-items-center justify-content-center mb-1 mt-3">
                    <div class="action-form">
                        <div class="form-group m-b-0 text-center">
                        <button type="submit" (click)="openModal(addEmp)" class="btn btn-info waves-effect waves-light me-4 btn-w-100" >{{"systemcode.add" | translate}}</button>
                        <button type="submit" class="btn btn-danger waves-effect waves-light ms-4 btn-w-100" >{{"systemcode.delete" | translate }}</button>
                        </div>
                    </div>
                </div>
            </div>
                <div class="col-md-12 col-xs-12 b-r" >
                    <div class="d-flex no-block align-items-center justify-content-center mb-1 mt-3">
                        <div class="action-form">
                            <div class="form-group m-b-0 text-center">
                                <button type="submit" class="btn btn-success waves-effect waves-light btn-w-100">
                                  {{"Save" | translate}}</button>
                              </div>
                        </div>
                    </div>
                </div>
           
        </div>
    </div>
</div>



<ng-template #addEmp let-modal>
    <div class="modal-content dialog-height">
      <div class="modal-body">
        <div class="card" style="margin-bottom:-15px">
          <div class="card-header bg-myhr">
            <h4>{{"auto.assign.position" | translate}}</h4>
          </div>
          <div class="card-body reset-card-body" >
            <div class="row">
                <div class="col-md-6 col-xs-12 b-r">
                    <div class="form-group">
                        <small class="text-muted">{{"position.id" | translate}}</small>
                        <input type="text " class="form-control  col-md-6 col-sm-6 col-lg-6">
                      </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 col-4 col-sm-4">
                    <div class="form-group">
                        <small class="text-muted">{{"assing.user.code" | translate}}</small>
                      <div class="input-group mb-3">
                        <input type="text" class="form-control  col-md-12 col-sm-12 col-lg-12" placeholder="{{'assing.user.code'| translate }}" aria-describedby="basic-addon1">
                        <div class="input-group-append">
                          <button class="btn me-0 btn-info" type="button"><i
                              class="fa fa-search"></i></button>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6 col-6 col-sm-8">
                    <div class="form-group">
                        <small class="text-muted">{{"Name-Surname" | translate}}</small>
                      <input type="text" placeholder="{{'Name-Surname'| translate }}" class="form-control"disabled>
                    </div>
                  </div>
            </div>
            <div class="row">
                <div class="col-md-3 col-xs-12 b-r">
                  <div class="form-group">
                    <small class="text-muted">{{"Start Date" | translate}}</small>
                    <div class="input-group">
                      <input class="form-control col-md-12 col-sm-12 col-lg-12" placeholder="{{'dd.mm.yyyy' | translate}}" readonly
                        name="dp3"   ngbDatepicker #d3="ngbDatepicker">
                      <div class="input-group-append">
                        <button class="btn btn-outline-info no-shadow" (click)="d3.toggle()" type="button">
                          <i class="far fa-calendar-alt"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 col-xs-12 b-r">
                  <div class="form-group">
                    <small class="text-muted">{{"End Date" | translate}}</small>
                    <div class="input-group">
                      <input readonly class="form-control col-md-12 col-sm-12 col-lg-12"
                        placeholder="{{'dd.mm.yyyy' | translate}}" name="dp4"  ngbDatepicker
                        #d4="ngbDatepicker">
                      <div class="input-group-append">
                        <button  class="btn btn-outline-info no-shadow" (click)="d4.toggle()" type="button">
                          <i class="far fa-calendar-alt"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button  type="button" class="btn btn-success" (click)="modal.close('Close click')">{{"systemcode.add" |translate}}</button>
        <button type="button" class="btn btn-danger" (click)="modal.dismiss('Cross click');">{{"Close"|
          translate}}</button>
      </div>
    </div>
  </ng-template>
<!-- รายชื่อพนักงาน -->
<ng-template #contentEmp let-modal>
    <div class="modal-content dialog-height">
      <div class="modal-body" [perfectScrollbar]="config">
        <div class="card" style="margin-bottom:-15px">
          <div class="card-header bg-myhr">
            <h4>{{"subordinate list" | translate}}</h4>
          </div>
          <div class="card-body pt-0 pt-2">
            <div class="d-flex mb-1">
                <!-- <input type="text" placeholder="{{'Name-Surname' | translate}}" class="form-control w-25"
                [(ngModel)]='searchTerm'> -->
            </div>
            <div class="table-responsive">
              <table class="table  table-hover table-striped-myhr table-sm  mb-0 no-wrap v-middle ">
                <thead class="bg-info ">
                  <tr class="text-white font-weight-normal">
                    <th class="font-weight-normal" scope="col">    
                        <input type="checkbox" (click)="selectAllEmpList($event.target.checked)" >
                    </th>
                    <th class="font-weight-normal" scope="col">{{"Employee ID"| translate}}</th>
                    <th class="font-weight-normal" scope="col">{{"Name-Surname"| translate}}</th>
                    <th class="font-weight-normal" scope="col">{{"Position"| translate}}</th>
                    <th class="font-weight-normal" scope="col">{{"Bu1"| translate}}</th>
                    <th class="font-weight-normal" scope="col">{{"Bu2"| translate}}</th>
                    <th class="font-weight-normal" scope="col">{{"Bu3"| translate}}</th>
                    <th class="font-weight-normal" scope="col">{{"Bu4"| translate}}</th>
                    <th class="font-weight-normal" scope="col">{{"Bu5"| translate}}</th>
                  </tr>
                </thead>
                <tbody *ngIf="loading">
                  <tr>
                    <td colspan="9" class="font-weight-normal text-center">
                      <div class="justify-content-center text-center" role="status">
                        <div class="spinner-grow text-info" role="status" style="margin: 5px;">
                          <span class="sr-only">Loading...</span>
                        </div>
                        <div class="spinner-grow text-info" role="status" style="margin: 5px;">
                          <span class="sr-only">Loading...</span>
                        </div>
                        <div class="spinner-grow text-info" role="status" style="margin: 5px;">
                          <span class="sr-only">Loading...</span>
                        </div>
                      </div>
                    </td>
                  </tr>
                </tbody>
                <tbody *ngIf="!loading">
                  <tr *ngIf="noData">
                    <td colspan="9" class="font-weight-normal text-center">{{"No Data Found" | translate}}</td>
                  </tr>
                  <tr class="cursor-myhr"
                    *ngFor="let item of empHrShowlist | slice: (pageModal-1) * pageSizeModal : (pageModal-1) * pageSizeModal + pageSizeModal; let i = index"
                 
                    >
                    <th class="align-middle text-center">
                        <input type="checkbox"  [(ngModel)]="empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select">
                    </th>
                    <td  (click)="empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select = !empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select" class="align-middle">{{item.employeeId}}</td>
                    <td (click)="empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select = !empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select" class="align-middle">{{item.getFullname()}}</td>
                    <td (click)="empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select = !empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select" class="align-middle">{{item.position.getPositionDesc()?item.position.getPositionDesc():'-'}}
                    </td>
                    <td (click)="empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select = !empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select" class="align-middle">{{item.bu1.getBu1Desc()?item.bu1.getBu1Desc():'-'}}</td>
                    <td (click)="empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select = !empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select" class="align-middle">{{item.bu2.getBu2Desc()?item.bu2.getBu2Desc():'-'}}</td>
                    <td (click)="empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select = !empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select" class="align-middle">{{item.bu3.getBu3Desc()?item.bu3.getBu3Desc():'-'}}</td>
                    <td (click)="empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select = !empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select" class="align-middle">{{item.bu4.getBu4Desc()?item.bu4.getBu4Desc():'-'}}</td>
                    <td (click)="empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select = !empCheckboxlist[((pageModal-1) * pageSizeModal)+i].select" class="align-middle">{{item.bu5.getBu5Desc()?item.bu5.getBu5Desc():'-'}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="d-flex justify-content-end p-2">
              <select class="form-select m-r-5" style="width: auto" [(ngModel)]="pageSizeModal" (ngModelChange)="pageModal">
                <option [ngValue]="10">{{"Items per page"| translate}}: 10</option>
                <option [ngValue]="50">{{"Items per page"| translate}}: 50</option>
                <option [ngValue]="100">{{"Items per page"| translate}}: 100</option>
              </select>
              <ngb-pagination [collectionSize]="collectionSizeModal" [(page)]="pageModal" [pageSize]="pageSizeModal" [maxSize]="3"
                [rotate]="true">
                <ng-template ngbPaginationPrevious>{{"Prev"| translate}}</ng-template>
                <ng-template ngbPaginationNext>{{"Next"| translate}}</ng-template>
              </ngb-pagination>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success  text-white" 
        (click)="selectEmp();modal.dismiss('Cross click')">
        {{"choose" | translate}}
    </button>
        <button type="button" class="btn btn-danger" (click)="modal.dismiss('Cross click')">{{"Close"|
          translate}}</button>
      </div>
    </div>
  </ng-template>
  
  <ng-template #confirmModal let-modal>
    <div class="modal-header">
      <h5 class="modal-title" id="editLabel">{{"Alert Message" | translate}}</h5>
      <button type="button" class="close" (click)="this.modalService.dismissAll();" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      {{msg | translate}}
    </div>
    <div class="modal-footer">
      <button type="button" *ngIf="namecheck == 'delete'" class="btn btn-info" (click)="onSubmit('delete');modal.close('Close click')">{{"confirm"|  translate}}</button> 
      <button type="button"  *ngIf="namecheck == 'add'" class="btn btn-info" (click)="onSubmit('add');modal.close('Close click')">{{"confirm"|  translate}}</button> 
      <button type="button" class="btn btn-danger" (click)="this.modalService.dismissAll();">{{"cancel"|
        translate}}</button>
    </div>
  </ng-template>

<ng-template #alertModal let-modal>
  <div class="modal-header">
      <h5 class="modal-title" id="editLabel">Alert Message</h5>
      <button type="button" class="close" (click)="modal.dismiss('Cross click')" aria-label="Close">
          <span aria-hidden="true">&times;</span>
      </button>
  </div>
  <div class="modal-body">
    {{msg}}
  </div>
  <div class="modal-footer">
    <button type="button"  class="btn btn-info" (click)="modal.close('Close click')">{{"confirm"|  translate}}</button> 

  </div>
</ng-template>
